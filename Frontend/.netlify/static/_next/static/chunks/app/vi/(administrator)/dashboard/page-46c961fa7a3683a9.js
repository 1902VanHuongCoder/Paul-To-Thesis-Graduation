(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3242],{7250:(e,t,r)=>{"use strict";r.d(t,{O:()=>l,y:()=>s});var a=r(20858);async function s(){if(!(await fetch("".concat(a.p,"/api/statistic/increment"),{method:"POST"})).ok)throw Error("Failed to fetch categories")}async function l(){let e=await fetch("".concat(a.p,"/api/statistic"),{method:"GET"});if(!e.ok)throw Error("Failed to fetch access stats");return e.json()}},22294:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eh});var a=r(95155),s=r(12115),l=r(4596);function n(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,l.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function o(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,l.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function c(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,l.cn)("leading-none font-semibold",t),...r})}function i(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,l.cn)("text-muted-foreground text-sm",t),...r})}function d(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-action",className:(0,l.cn)("col-start-2 row-span-2 row-start-1 self-start justify-self-end",t),...r})}function x(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,l.cn)("px-6",t),...r})}function h(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,l.cn)("flex items-center px-6 [.border-t]:pt-6",t),...r})}var u=r(78158),m=r(30991),g=r(36168),p=r(3401),f=r(94754),b=r(96025),j=r(16238),y=r(83394),v=r(83540),N=r(94517),w=r(24026);let k={light:"",dark:".dark"},S=s.createContext(null);function A(e){let{id:t,className:r,children:n,config:o,...c}=e,i=s.useId(),d="chart-".concat(t||i.replace(/:/g,""));return(0,a.jsx)(S.Provider,{value:{config:o},children:(0,a.jsxs)("div",{"data-slot":"chart","data-chart":d,className:(0,l.cn)("[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden",r),...c,children:[(0,a.jsx)(D,{id:d,config:o}),(0,a.jsx)(v.u,{children:n})]})})}let D=e=>{let{id:t,config:r}=e,s=Object.entries(r).filter(e=>{let[,t]=e;return t.theme||t.color});return s.length?(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(k).map(e=>{let[r,a]=e;return"\n".concat(a," [data-chart=").concat(t,"] {\n").concat(s.map(e=>{var t;let[a,s]=e,l=(null==(t=s.theme)?void 0:t[r])||s.color;return l?"  --color-".concat(a,": ").concat(l,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},F=N.m;function C(e){let{active:t,payload:r,className:n,indicator:o="dot",hideLabel:c=!1,hideIndicator:i=!1,label:d,labelFormatter:x,labelClassName:h,formatter:u,color:m,nameKey:g,labelKey:p}=e,{config:f}=function(){let e=s.useContext(S);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}(),b=s.useMemo(()=>{var e;if(c||!(null==r?void 0:r.length))return null;let[t]=r,s="".concat(p||(null==t?void 0:t.dataKey)||(null==t?void 0:t.name)||"value"),n=M(f,t,s),o=p||"string"!=typeof d?null==n?void 0:n.label:(null==(e=f[d])?void 0:e.label)||d;return x?(0,a.jsx)("div",{className:(0,l.cn)("font-medium",h),children:x(o,r)}):o?(0,a.jsx)("div",{className:(0,l.cn)("font-medium",h),children:o}):null},[d,x,r,c,h,f,p]);if(!t||!(null==r?void 0:r.length))return null;let j=1===r.length&&"dot"!==o;return(0,a.jsxs)("div",{className:(0,l.cn)("border-border/50 bg-background grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl",n),children:[j?null:b,(0,a.jsx)("div",{className:"grid gap-1.5",children:r.map((e,t)=>{let r="".concat(g||e.name||e.dataKey||"value"),s=M(f,e,r),n=m||e.payload.fill||e.color;return(0,a.jsx)("div",{className:(0,l.cn)("[&>svg]:text-muted-foreground flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5","dot"===o&&"items-center"),children:u&&(null==e?void 0:e.value)!==void 0&&e.name?u(e.value,e.name,e,t,e.payload):(0,a.jsxs)(a.Fragment,{children:[(null==s?void 0:s.icon)?(0,a.jsx)(s.icon,{}):!i&&(0,a.jsx)("div",{className:(0,l.cn)("shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)",{"h-2.5 w-2.5":"dot"===o,"w-1":"line"===o,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===o,"my-0.5":j&&"dashed"===o}),style:{"--color-bg":n,"--color-border":n}}),(0,a.jsxs)("div",{className:(0,l.cn)("flex flex-1 justify-between leading-none",j?"items-end":"items-center"),children:[(0,a.jsxs)("div",{className:"grid gap-1.5",children:[j?b:null,(0,a.jsx)("span",{className:"text-muted-foreground",children:(null==s?void 0:s.label)||e.name})]}),e.value&&(0,a.jsx)("span",{className:"text-foreground font-mono font-medium tabular-nums",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})}function M(e,t,r){if("object"!=typeof t||null===t)return;let a="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,s=r;return r in t&&"string"==typeof t[r]?s=t[r]:a&&r in a&&"string"==typeof a[r]&&(s=a[r]),s in e?e[s]:e[r]}w.s;var E=r(20858),L=r(74824);let _={week:{label:"Theo tuần",color:"var(--color-sky-500)"},month:{label:"Theo th\xe1ng",color:"var(--chart-2)"}};function T(){let[e,t]=s.useState("week"),[r,l]=s.useState([]),[d,h]=s.useState([]),[u,m]=s.useState(!0),[g,v]=s.useState([]),[N,w]=s.useState([]),[k,S]=s.useState(new Date().getFullYear()),[D,M]=s.useState(new Date().getMonth()+1);s.useEffect(()=>{!async function(){m(!0);try{let e=await fetch("".concat(E.p,"/api/order")),t=(await e.json()).filter(e=>"completed"===e.orderStatus),r=new Set,a=new Set;t.forEach(e=>{let t=new Date(e.createdAt);r.add(t.getFullYear()),t.getFullYear()===k&&a.add(t.getMonth()+1)}),v(Array.from(r).sort((e,t)=>e-t)),w(Array.from(a).sort((e,t)=>e-t));let s=new Map;t.forEach(e=>{let t=new Date(e.createdAt);if(t.getFullYear()===k&&t.getMonth()+1===D){let r=function(e){let t=e.getFullYear(),r=(e.getMonth()+1).toString().padStart(2,"0"),a=function(e){let t=new Date(e.getFullYear(),e.getMonth(),1),r=0===t.getDay()?7:t.getDay();return Math.floor((e.getDate()+r-2)/7)+1}(e);return"".concat(t,"-").concat(r,"-W").concat(a)}(t);s.set(r,(s.get(r)||0)+e.totalPayment)}});let n=Array.from(s.entries()).map(e=>{let[t,r]=e;return{date:t,revenue:r}}).sort((e,t)=>e.date.localeCompare(t.date)),o=new Map;t.forEach(e=>{let t=new Date(e.createdAt);if(t.getFullYear()===k){let r="".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"));o.set(r,(o.get(r)||0)+e.totalPayment)}});let c=Array.from(o.entries()).map(e=>{let[t,r]=e;return{date:t,revenue:r}}).sort((e,t)=>e.date.localeCompare(t.date));l(n),h(c)}catch(e){console.error("Error fetching orders:",e),l([]),h([])}finally{m(!1)}}()},[k,D]);let T="week"===e?r:d,W=s.useMemo(()=>{if("week"!==e)return T;let t=[];for(let e=1;e<=4;e++){let r="".concat(k,"-").concat(D.toString().padStart(2,"0"),"-W").concat(e),a=T.find(e=>e.date===r);t.push({date:r,revenue:a?a.revenue:0})}return t},[e,T,k,D]),P=s.useMemo(()=>{if("month"!==e)return d;let t=[];for(let e=1;e<=12;e++){let r="".concat(k,"-").concat(e.toString().padStart(2,"0")),a=d.find(e=>e.date===r);t.push({date:r,revenue:a?a.revenue:0})}return t},[e,d,k]);return(0,a.jsxs)(n,{className:"py-4 sm:py-0 bg-white shadow-lg rounded-xl border border-gray-200",children:[(0,a.jsxs)(o,{className:"flex flex-col items-stretch border-b !p-0 sm:flex-row bg-white rounded-t-xl",children:[(0,a.jsxs)("div",{className:"flex flex-1 flex-col justify-center gap-1 px-6 pb-3 sm:pb-0",children:[(0,a.jsx)(c,{className:"text-2xl font-semibold text-gray-800",children:"Biểu đồ doanh thu cửa h\xe0ng"}),(0,a.jsx)(i,{className:"text-gray-500",children:"Hiển thị doanh thu theo theo th\xe1ng v\xe0 cả năm."})]}),(0,a.jsxs)("div",{className:"flex gap-4 items-end px-6 py-4 bg-white rounded-tr-xl",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"year-select",className:"text-xs text-muted-foreground mb-1",children:"Năm"}),(0,a.jsxs)(L.l6,{value:k.toString(),onValueChange:e=>S(Number(e)),children:[(0,a.jsx)(L.bq,{id:"year-select",className:"w-24 bg-white border-gray-300 shadow-sm",children:(0,a.jsx)(L.yv,{placeholder:"Năm"})}),(0,a.jsx)(L.gC,{children:g.map(e=>(0,a.jsx)(L.eb,{value:e.toString(),children:e},e))})]})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"month-select",className:"text-xs text-muted-foreground mb-1",children:"Th\xe1ng"}),(0,a.jsxs)(L.l6,{value:D.toString(),onValueChange:e=>M(Number(e)),children:[(0,a.jsx)(L.bq,{id:"month-select",className:"w-20 bg-white border-gray-300 shadow-sm",children:(0,a.jsx)(L.yv,{placeholder:"Th\xe1ng"})}),(0,a.jsx)(L.gC,{children:N.map(e=>(0,a.jsx)(L.eb,{value:e.toString(),children:e.toString().padStart(2,"0")},e))})]})]}),(0,a.jsxs)("button",{"data-active":"week"===e,className:"data-[active=true]:bg-blue-50 data-[active=true]:text-blue-600 transition-colors flex flex-col justify-center gap-1 border-t px-4 py-2 text-left border-l sm:border-t-0 sm:border-l sm:px-6 sm:py-4 rounded-lg",onClick:()=>t("week"),children:[(0,a.jsx)("span",{className:"text-muted-foreground text-xs",children:"Mỗi th\xe1ng"}),(0,a.jsx)("span",{className:"text-lg leading-none font-bold sm:text-2xl",children:W.reduce((e,t)=>e+t.revenue,0).toLocaleString()})]}),(0,a.jsxs)("button",{"data-active":"month"===e,className:"data-[active=true]:bg-blue-50 data-[active=true]:text-blue-600 transition-colors flex flex-col justify-center gap-1 border-t px-4 py-2 text-left border-l sm:border-t-0 sm:border-l sm:px-6 sm:py-4 rounded-lg",onClick:()=>t("month"),children:[(0,a.jsx)("span",{className:"text-muted-foreground text-xs",children:"Cả năm"}),(0,a.jsx)("span",{className:"text-lg leading-none font-bold sm:text-2xl",children:P.reduce((e,t)=>e+t.revenue,0).toLocaleString()})]})]})]}),(0,a.jsx)(x,{className:"px-2 sm:p-6 bg-white rounded-b-xl h-full",children:u?(0,a.jsx)("div",{className:"text-center py-10 text-gray-400",children:"Đang tải dữ liệu..."}):(0,a.jsx)(A,{config:_,className:"aspect-auto w-full h-full",children:(0,a.jsxs)(p.E,{data:"week"===e?W:P,margin:{left:12,right:12},children:[(0,a.jsx)(f.d,{vertical:!1,strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,a.jsx)(b.W,{dataKey:"date",tickLine:!1,axisLine:!1,tickMargin:8,minTickGap:32,tickFormatter:t=>{if("week"===e){let e=t.match(/^(\d{4})-(\d{2})-W(\d)$/);if(e){let[,t,r,a]=e;return"Tuần ".concat(a,"/").concat(r,"/").concat(t)}return t}{let[e,r]=t.split("-");return"".concat(r,"/").concat(e)}},style:{fill:"#64748b",fontWeight:500,fontSize:13}}),(0,a.jsx)(j.h,{tickLine:!1,axisLine:!1,tickMargin:8,width:80,tickFormatter:e=>e.toLocaleString()+" VND",style:{fill:"#64748b",fontWeight:500,fontSize:13}}),(0,a.jsx)(F,{content:(0,a.jsx)(C,{className:"w-[150px]",nameKey:"revenue",labelFormatter:t=>{if("week"===e){let[e,r,a]=t.split(/-|W/);return"Tuần ".concat(a,"/").concat(r,"/").concat(e)}{let[e,r]=t.split("-");return"Th\xe1ng ".concat(r,"/").concat(e)}}})}),(0,a.jsx)(y.y,{dataKey:"revenue",fill:_[e].color,radius:[8,8,0,0],barSize:32})]})})})]})}var W=r(45861),P=r(93504),K=r(21374);function B(){let[e,t]=s.useState([]),[r,l]=s.useState([]),[d,h]=s.useState(new Date().getFullYear()),[u,m]=s.useState(!0);return s.useEffect(()=>{!async function(){m(!0);try{let e=await fetch("".concat(E.p,"/api/users")),r=await e.json(),a=new Set;r.forEach(e=>{let t=new Date(e.createdAt);a.add(t.getFullYear())}),l(Array.from(a).sort((e,t)=>e-t));let s=new Map;r.forEach(e=>{let t=new Date(e.createdAt);if(t.getFullYear()===d){let e="".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"));s.set(e,(s.get(e)||0)+1)}});let n=[];for(let e=1;e<=12;e++){let t="".concat(d,"-").concat(e.toString().padStart(2,"0"));n.push({date:t,count:s.get(t)||0})}t(n)}catch(e){console.error("Error fetching user data:",e),t([])}finally{m(!1)}}()},[d]),(0,a.jsxs)(n,{className:"py-6 shadow-lg rounded-xl border-0",children:[(0,a.jsxs)(o,{className:"flex flex-col items-stretch border-b-0 !pb-2 sm:flex-row",children:[(0,a.jsxs)("div",{className:"flex flex-1 flex-col justify-center gap-1 pb-3 sm:pb-0",children:[(0,a.jsx)(c,{className:"text-2xl font-bold text-primary",children:"Biểu đồ ph\xe1t triển t\xe0i khoản người d\xf9ng"}),(0,a.jsx)(i,{className:"text-base text-primary/80",children:"Hiển thị số lượng t\xe0i khoản mới theo từng th\xe1ng trong năm."})]}),(0,a.jsx)("div",{className:"flex gap-2 items-center",children:(0,a.jsxs)("div",{className:"flex flex-row items-center gap-x-4",children:[(0,a.jsx)("label",{htmlFor:"user-growth-year-select",className:"text-xs text-primary mb-1",children:"Năm"}),(0,a.jsxs)(L.l6,{value:d.toString(),onValueChange:e=>h(Number(e)),children:[(0,a.jsx)(L.bq,{id:"user-growth-year-select",className:"w-24 border-primary/30 focus:ring-2 focus:ring-primary",children:(0,a.jsx)(L.yv,{placeholder:"Năm"})}),(0,a.jsx)(L.gC,{children:r.map(e=>(0,a.jsx)(L.eb,{value:e.toString(),className:"hover:bg-primary/10",children:e},e))})]})]})})]}),(0,a.jsx)(x,{className:"px-2 sm:p-8",children:u?(0,a.jsx)("div",{className:"text-center py-16 text-primary font-medium animate-pulse",children:"Đang tải dữ liệu..."}):(0,a.jsx)(v.u,{width:"100%",height:320,children:(0,a.jsxs)(P.b,{data:e,margin:{left:12,right:12,top:24,bottom:8},children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"var(--primary)",stopOpacity:.4}),(0,a.jsx)("stop",{offset:"100%",stopColor:"var(--primary)",stopOpacity:.05})]})}),(0,a.jsx)(f.d,{vertical:!1,strokeDasharray:"3 3",stroke:"var(--primary-100, #c7d2fe)"}),(0,a.jsx)(b.W,{dataKey:"date",tickLine:!1,axisLine:!1,tickMargin:10,minTickGap:32,tickFormatter:e=>{let[,t]=e.split("-");return"Th\xe1ng ".concat(t)},className:"text-primary"}),(0,a.jsx)(j.h,{tickLine:!1,axisLine:!1,tickMargin:10,width:60,tickFormatter:e=>e.toLocaleString(),className:"text-primary"}),(0,a.jsx)(N.m,{contentStyle:{borderRadius:12,background:"#fff",border:"1px solid var(--primary)"},formatter:e=>"".concat(e," t\xe0i khoản"),labelFormatter:e=>{let[,t]=e.split("-");return"Th\xe1ng ".concat(t)}}),(0,a.jsx)(K.N,{type:"monotone",dataKey:"count",stroke:"var(--primary)",strokeWidth:3,dot:{r:5,stroke:"var(--primary)",strokeWidth:2,fill:"#fff",filter:"drop-shadow(0 2px 4px #2563eb33)"},activeDot:{r:8,fill:"var(--primary)",stroke:"#fff",strokeWidth:3,filter:"drop-shadow(0 2px 8px #2563eb66)"},fill:"url(#colorUv)",isAnimationActive:!0})]})})})]})}var I=r(8782),Y=r(34e3),q=r(54811),z=r(60379);let G={count:{label:"Số lượng b\xecnh luận"},star1:{label:"1 sao",color:"#eab308"},star2:{label:"2 sao",color:"#fde047"},star3:{label:"3 sao",color:"#a3e635"},star4:{label:"4 sao",color:"#38bdf8"},star5:{label:"5 sao",color:"#6366f1"}};function O(){let[e,t]=s.useState([{rating:"1 sao",count:0,fill:G.star1.color},{rating:"2 sao",count:0,fill:G.star2.color},{rating:"3 sao",count:0,fill:G.star3.color},{rating:"4 sao",count:0,fill:G.star4.color},{rating:"5 sao",count:0,fill:G.star5.color}]),[r,l]=s.useState(0);return s.useEffect(()=>{!async function(){try{let e=await fetch("".concat(E.p,"/api/comment")),r=await e.json();console.log("Fetched comments:",r);let a=[0,0,0,0,0];r.forEach(e=>{e.rating>=1&&e.rating<=5&&a[e.rating-1]++}),t([{rating:"1 sao",count:a[0],fill:G.star1.color},{rating:"2 sao",count:a[1],fill:G.star2.color},{rating:"3 sao",count:a[2],fill:G.star3.color},{rating:"4 sao",count:a[3],fill:G.star4.color},{rating:"5 sao",count:a[4],fill:G.star5.color}]),console.log([{rating:"1 sao",count:a[0],fill:G.star1.color},{rating:"2 sao",count:a[1],fill:G.star2.color},{rating:"3 sao",count:a[2],fill:G.star3.color},{rating:"4 sao",count:a[3],fill:G.star4.color},{rating:"5 sao",count:a[4],fill:G.star5.color}]),l(a.reduce((e,t)=>e+t,0))}catch(e){t([{rating:"1 sao",count:0,fill:G.star1.color},{rating:"2 sao",count:0,fill:G.star2.color},{rating:"3 sao",count:0,fill:G.star3.color},{rating:"4 sao",count:0,fill:G.star4.color},{rating:"5 sao",count:0,fill:G.star5.color}]),l(0)}}()},[]),(0,a.jsxs)(n,{className:"flex flex-col shadow-lg border-2 border-primary/30",children:[(0,a.jsxs)(o,{className:"items-center pb-0",children:[(0,a.jsx)(c,{className:"text-primary text-xl font-extrabold tracking-wide",children:"Biểu đồ b\xecnh luận & đ\xe1nh gi\xe1 tin tức"}),(0,a.jsx)(i,{className:"text-base text-muted-foreground",children:"Số lượng b\xecnh luận theo từng mức đ\xe1nh gi\xe1"})]}),(0,a.jsxs)(x,{className:"flex-1 pb-0 flex flex-col items-center",children:[(0,a.jsx)(A,{config:G,className:"mx-auto aspect-square max-h-[250px] min-h-[250px] min-w-[250px] w-[250px] h-[250px]",children:(0,a.jsxs)(I.r,{width:250,height:250,children:[(0,a.jsx)(F,{cursor:!1,content:(0,a.jsx)(C,{hideLabel:!0})}),(0,a.jsxs)(Y.F,{data:e,dataKey:"count",nameKey:"rating",innerRadius:60,outerRadius:100,strokeWidth:5,isAnimationActive:!0,children:[e.map((e,t)=>(0,a.jsx)(q.f,{fill:e.fill},"cell-".concat(t))),(0,a.jsx)(z.J,{content:e=>{let{viewBox:t}=e;if(t&&"cx"in t&&"cy"in t)return(0,a.jsx)("g",{children:(0,a.jsxs)("text",{x:t.cx,y:t.cy,textAnchor:"middle",dominantBaseline:"middle",children:[(0,a.jsx)("tspan",{x:t.cx,y:t.cy,className:"fill-primary text-4xl font-extrabold drop-shadow",children:r.toLocaleString()}),(0,a.jsx)("tspan",{x:t.cx,y:(t.cy||0)+28,className:"fill-muted-foreground text-lg",children:"B\xecnh luận"})]})})}})]})]})}),(0,a.jsx)("div",{className:"flex flex-wrap gap-4 mt-6 justify-center",children:e.map(t=>(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 rounded-lg shadow-sm border ".concat(t.count===Math.max(...e.map(e=>e.count))&&t.count>0?"bg-primary/10 border-primary font-bold scale-105":"bg-muted"," transition-all"),children:[(0,a.jsx)("span",{style:{display:"inline-block",width:18,height:18,borderRadius:6,background:t.fill,border:"2px solid #fff",boxShadow:"0 0 0 1px #ccc"}}),(0,a.jsx)("span",{className:"text-base",children:t.rating}),(0,a.jsx)("span",{className:"ml-1 text-sm text-muted-foreground",children:t.count}),t.count===Math.max(...e.map(e=>e.count))&&t.count>0&&(0,a.jsx)("span",{className:"ml-2 px-2 py-0.5 rounded bg-primary text-white text-xs font-semibold",children:"Nổi bật"})]},t.rating))})]}),(0,a.jsxs)(h,{className:"flex-col gap-2 text-base mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 leading-none font-semibold text-primary",children:["Tổng số b\xecnh luận:"," ",(0,a.jsx)("span",{className:"text-2xl font-bold ml-1",children:r.toLocaleString()})]}),(0,a.jsxs)("div",{className:"text-muted-foreground leading-none mt-1",children:["Hiển thị ph\xe2n bố b\xecnh luận theo đ\xe1nh gi\xe1 ",(0,a.jsx)("span",{className:"font-semibold text-primary",children:"1-5 sao"})]})]})]})}var H=r(33926);let R=["#4F8A8B","#F9A826","#A93F55","#3A6351","#F76E11","#6C3483","#229954","#CA6F1E"],V=function(){let[e,t]=s.useState([]),[r,l]=s.useState(!0);s.useEffect(()=>{(async()=>{try{let e=(await (0,H.jE)()).map(e=>({categoryName:e.categoryName||e.category||"Kh\xe1c",count:e.count||0}));t(e)}catch(e){console.error("Error fetching categories:",e)}l(!1)})()},[]);let d=s.useMemo(()=>e.reduce((e,t)=>e+(t.count||0),0),[e]),u=s.useMemo(()=>e.reduce((e,t)=>t.count>((null==e?void 0:e.count)||0)?t:e,e[0]),[e]);return(0,a.jsxs)(n,{className:"flex flex-col shadow-lg border-0 bg-gradient-to-br from-white via-slate-50 to-slate-100",children:[(0,a.jsxs)(o,{className:"items-center pb-0",children:[(0,a.jsx)(c,{className:"text-xl font-extrabold text-primary drop-shadow-sm",children:"Thống k\xea sản phẩm tr\xean danh mục"}),(0,a.jsx)(i,{className:"text-base text-muted-foreground",children:"Số lượng sản phẩm tr\xean mỗi danh mục được thể hiện qua biểu đồ tr\xf2n."})]}),(0,a.jsx)(x,{className:"flex-1 pb-0 flex flex-col items-center justify-center",children:(0,a.jsx)(A,{config:{pie:{label:"Pie Chart",icon:void 0,color:"#4F8A8B"}},className:"mx-auto aspect-square max-h-[250px] w-[250px] h-[250px] relative",children:(0,a.jsxs)(I.r,{children:[(0,a.jsx)(F,{cursor:!1,content:(0,a.jsx)(C,{hideLabel:!0})}),(0,a.jsxs)(Y.F,{data:e,dataKey:"count",nameKey:"categoryName",innerRadius:60,outerRadius:80,strokeWidth:5,isAnimationActive:!r,children:[e.map((e,t)=>(0,a.jsx)(q.f,{fill:R[t%R.length],stroke:(null==u?void 0:u.categoryName)===e.categoryName?"#222":"#fff",strokeWidth:(null==u?void 0:u.categoryName)===e.categoryName?4:2},"cell-".concat(t))),(0,a.jsx)(z.J,{content:e=>{let{viewBox:t}=e;if(t&&"cx"in t&&"cy"in t)return(0,a.jsx)("g",{children:(0,a.jsxs)("text",{x:t.cx,y:t.cy,textAnchor:"middle",dominantBaseline:"middle",children:[(0,a.jsx)("tspan",{x:t.cx,y:t.cy,className:"fill-primary text-3xl font-extrabold",children:d}),(0,a.jsx)("tspan",{x:t.cx,y:(t.cy||0)+24,className:"fill-muted-foreground text-base",children:"Sản phẩm"})]})})}})]})]})})}),(0,a.jsxs)(h,{className:"flex-col gap-2 text-sm",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-3 mt-2 justify-center",children:e.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1 rounded-lg ".concat((null==u?void 0:u.categoryName)===e.categoryName?"bg-primary/10 border border-primary font-bold shadow":"bg-muted"),children:[(0,a.jsx)("span",{className:"inline-block w-3 h-3 rounded-full border",style:{background:R[t%R.length],borderColor:(null==u?void 0:u.categoryName)===e.categoryName?"#4F8A8B":"#fff"}}),(0,a.jsx)("span",{children:e.categoryName}),(0,a.jsxs)("span",{className:"text-muted-foreground",children:["(",e.count,")"]})]},e.categoryName))}),(0,a.jsx)("div",{className:"text-muted-foreground leading-none mt-2 text-center",children:(0,a.jsxs)("span",{className:"font-semibold text-primary",children:["Tổng số sản phẩm: ",d]})})]})]})};var U=r(85692),X=r(21203),J=r(7250),$=r(66766),Q=r(10173),Z=r(54372),ee=r(89917),et=r(6874),er=r.n(et),ea=r(42526);let es=()=>{let[e,t]=(0,s.useState)("top"),[r,l]=(0,s.useState)([]),[n,o]=(0,s.useState)([]),[c,i]=(0,s.useState)(!0),[d,x]=(0,s.useState)(null);return(0,s.useEffect)(()=>{(async()=>{i(!0),x(null);try{if("top"===e){let e=await (0,Q.af)();l(e)}else{let e=await (0,Q.pm)();o(e)}}catch(e){x("Kh\xf4ng thể tải dữ liệu sản phẩm."),console.error("Error fetching products:",e)}finally{i(!1)}})()},[e]),(0,a.jsxs)("section",{className:" bg-white",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-primary mt-6 mb-4",children:"Sản Phẩm B\xe1n Chạy - B\xe1n Chậm"}),(0,a.jsxs)(Z.tU,{value:e,onValueChange:t,className:"mb-4 ",children:[(0,a.jsxs)(Z.j7,{className:"flex justify-center px-1 mb-8",children:[(0,a.jsx)(Z.Xi,{value:"top",className:"hover:cursor-pointer",children:"Top b\xe1n chạy"}),(0,a.jsx)(Z.Xi,{value:"poor",className:"hover:cursor-pointer",children:"B\xe1n chậm / chưa b\xe1n"})]}),(0,a.jsx)(Z.av,{value:"top",className:"top"===e?"block":"hidden",children:(e=>c?(0,a.jsx)("div",{children:"Đang tải sản phẩm..."}):d?(0,a.jsx)("div",{className:"text-red-500",children:d}):e.length?(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8",children:e.map(e=>{var t,r,s,l,n,o,c;return(0,a.jsxs)("div",{className:"relative border-2 border-[#f8c32c] rounded-2xl p-5 flex flex-col items-center bg-gradient-to-br from-[#f8c32c]/10 via-white to-[#278d45]/10 shadow-lg hover:shadow-2xl transition group hover:scale-[1.03] duration-200",children:[(0,a.jsx)("div",{className:"w-28 h-28 mb-3 relative rounded-xl overflow-hidden border-2 border-[#278d45]/30 bg-white flex items-center justify-center shadow-inner",children:(null==(r=e.product)||null==(t=r.images)?void 0:t[0])?(0,a.jsx)($.default,{src:e.product.images[0],alt:e.product.productName,fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-110"}):(0,a.jsx)("div",{className:"w-full h-full bg-[#f8c32c]/20 flex items-center justify-center text-[#278d45] text-base font-bold",children:(0,a.jsx)("span",{role:"img","aria-label":"no image",children:"\uD83E\uDDF8"})})}),(0,a.jsxs)("div",{className:"text-center w-full",children:[(0,a.jsx)("div",{className:"font-semibold text-base mb-1 line-clamp-2 max-w-[220px] truncate text-[#0d401c] group-hover:text-[#278d45] transition",children:null==(s=e.product)?void 0:s.productName}),(0,a.jsx)("div",{className:"flex items-center justify-center gap-2 mb-1",children:(null==(l=e.product)?void 0:l.productPriceSale)&&e.product.productPriceSale>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"text-[#278d45] font-bold text-lg drop-shadow",children:[e.product.productPriceSale.toLocaleString(),"₫"]}),(0,a.jsxs)("span",{className:"line-through text-gray-400 text-sm",children:[null==(n=e.product.productPrice)?void 0:n.toLocaleString(),"₫"]}),(0,a.jsxs)("span",{className:"bg-[#f8c32c]/20 text-[#f8c32c] text-xs px-2 py-0.5 rounded-full font-semibold border border-[#f8c32c]/40 shadow",children:["-",Math.round(100-e.product.productPriceSale/e.product.productPrice*100),"%"]})]}):(0,a.jsxs)("span",{className:"text-[#278d45] font-bold text-lg drop-shadow",children:[null==(c=e.product)||null==(o=c.productPrice)?void 0:o.toLocaleString(),"₫"]})}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-xs text-[#0d401c] mt-1",children:[(0,a.jsxs)("span",{className:"bg-[#f8c32c]/20 text-[#0d401c] px-2 py-0.5 rounded-full font-medium border border-[#f8c32c]/40 shadow",children:["Đ\xe3 b\xe1n: ",(0,a.jsx)("span",{className:"font-bold",children:e.orderCount})]}),(0,a.jsxs)("span",{className:"bg-[#278d45]/10 text-[#278d45] px-2 py-0.5 rounded-full font-medium border border-[#278d45]/30 shadow",children:["ID: ",e.productID]})]})]}),(0,a.jsx)(er(),{href:"/vi/dashboard/products/edit-product/".concat(e.productID),className:"absolute top-4 right-4 rounded-full bg-white border-2 border-[#278d45]/30 p-2 shadow hover:bg-[#278d45] hover:text-white transition",title:"Chỉnh sửa sản phẩm",children:(0,a.jsx)(ee.A,{className:"w-5 h-5"})}),(0,a.jsx)("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-[#f8c32c] text-[#0d401c] px-3 py-1 rounded-full text-xs font-bold shadow border border-[#f8c32c]/60 animate-bounce",children:"\uD83C\uDF1F Best Seller!"})]},e.productID)})}):(0,a.jsx)("div",{children:"Kh\xf4ng c\xf3 dữ liệu sản phẩm."}))(r)}),(0,a.jsx)(Z.av,{value:"poor",className:"poor"===e?"block":"hidden",children:(e=>c?(0,a.jsx)("div",{children:"Đang tải sản phẩm..."}):d?(0,a.jsx)("div",{className:"text-red-500",children:d}):e.length?(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8",children:e.map(e=>{var t,r,s;return(0,a.jsxs)("div",{className:"relative border-2 border-[#f8c32c] rounded-2xl p-5 flex flex-col items-center bg-gradient-to-br from-[#f8c32c]/5 via-white to-[#278d45]/5 shadow-lg hover:shadow-2xl transition group hover:scale-[1.03] duration-200",children:[(0,a.jsx)("div",{className:"w-28 h-28 mb-3 relative rounded-xl overflow-hidden border-2 border-[#278d45]/30 bg-white flex items-center justify-center shadow-inner",children:(null==(t=e.images)?void 0:t[0])?(0,a.jsx)($.default,{src:e.images[0],alt:e.productName,fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-110"}):(0,a.jsx)($.default,{src:ea.A,alt:"No image",fill:!0,className:"object-cover opacity-70"})}),(0,a.jsxs)("div",{className:"text-center w-full",children:[(0,a.jsx)("div",{className:"font-semibold text-base mb-1 line-clamp-2 max-w-[220px] truncate text-[#0d401c] group-hover:text-[#278d45] transition",children:e.productName}),(0,a.jsx)("div",{className:"flex items-center justify-center gap-2 mb-1",children:e.productPriceSale&&e.productPriceSale>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"text-[#278d45] font-bold text-lg drop-shadow",children:[e.productPriceSale.toLocaleString(),"₫"]}),(0,a.jsxs)("span",{className:"line-through text-gray-400 text-sm",children:[null==(r=e.productPrice)?void 0:r.toLocaleString(),"₫"]}),(0,a.jsxs)("span",{className:"bg-[#f8c32c]/20 text-[#f8c32c] text-xs px-2 py-0.5 rounded-full font-semibold border border-[#f8c32c]/40 shadow",children:["-",Math.round(100-e.productPriceSale/e.productPrice*100),"%"]})]}):(0,a.jsxs)("span",{className:"text-[#278d45] font-bold text-lg drop-shadow",children:[null==(s=e.productPrice)?void 0:s.toLocaleString(),"₫"]})}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-xs text-[#b91c1c] mt-1",children:[(0,a.jsx)("span",{className:"bg-[#f8c32c]/10 text-[#b91c1c] px-2 py-0.5 rounded-full font-semibold border border-[#f8c32c]/30 shadow animate-pulse",children:"Chưa b\xe1n được"}),(0,a.jsxs)("span",{className:"bg-[#278d45]/10 text-[#278d45] px-2 py-0.5 rounded-full font-medium border border-[#278d45]/30 shadow",children:["ID: ",e.productID]})]})]}),(0,a.jsx)(er(),{href:"/vi/dashboard/products/edit-product/".concat(e.productID),className:"absolute top-4 right-4 rounded-full bg-white border-2 border-[#278d45]/30 p-2 shadow hover:bg-[#278d45] hover:text-white transition",title:"Chỉnh sửa sản phẩm",children:(0,a.jsx)(ee.A,{className:"w-5 h-5"})}),(0,a.jsx)("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-[#b91c1c] text-white px-3 py-1 rounded-full text-xs font-bold shadow border border-[#f8c32c]/60 animate-bounce",children:"\uD83D\uDEA8 B\xe1n chậm!"})]},e.productID)})}):(0,a.jsx)("div",{children:"Kh\xf4ng c\xf3 dữ liệu sản phẩm."}))(n)})]})]})};var el=r(3925),en=r(91540);let eo=()=>{let[e,t]=(0,s.useState)([]),[r,l]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(async()=>{try{l(!0);let e=await (0,Q.IB)(),r=Array.isArray(e)?e:e.data;t(r)}catch(e){console.error("Error fetching products:",e)}finally{l(!1)}})()},[]),r)?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)("section",{children:[(0,a.jsx)("div",{className:"overflow-x-auto rounded-lg shadow",children:(0,a.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gradient-to-r from-green-700 to-green-900 text-white",children:[(0,a.jsx)("th",{className:"py-3 px-4 text-left font-semibold rounded-tl-lg",children:"ID"}),(0,a.jsx)("th",{className:"py-3 px-4 text-left font-semibold",children:"T\xean sản phẩm"}),(0,a.jsx)("th",{className:"py-3 px-4 text-left font-semibold",children:"Gi\xe1"}),(0,a.jsx)("th",{className:"py-3 px-4 text-left font-semibold",children:"Tồn kho"}),(0,a.jsx)("th",{className:"py-3 px-4 text-left font-semibold rounded-tr-lg",children:"Số đơn h\xe0ng"})]})}),(0,a.jsx)("tbody",{children:e&&e.length>0?e.map(e=>{var t;return(0,a.jsxs)("tr",{className:"hover:bg-green-50 transition",children:[(0,a.jsx)("td",{className:"py-2 px-4 font-mono text-gray-700",children:e.productID}),(0,a.jsx)("td",{className:"py-2 px-4 font-semibold text-gray-900",children:e.productName}),(0,a.jsxs)("td",{className:"py-2 px-4 text-green-700 font-bold",children:[null==(t=e.productPrice)?void 0:t.toLocaleString(),"₫"]}),(0,a.jsx)("td",{className:"py-2 px-4 ".concat(e.quantityAvailable<5?"bg-red-100 text-red-700 font-bold rounded":"text-gray-700"),children:e.quantityAvailable}),(0,a.jsx)("td",{className:"py-2 px-4 ".concat(e.orderCount>10?"bg-green-100 text-green-800 font-bold rounded":"text-gray-700"),children:e.orderCount})]},e.productID)}):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"py-4 px-4 text-center text-gray-400",children:"Kh\xf4ng c\xf3 sản phẩm n\xe0o."})})})]})}),(0,a.jsx)("div",{className:"mt-4 flex justify-end",children:(0,a.jsxs)("button",{className:"flex items-center gap-2 px-5 py-2.5 hover:cursor-pointer bg-gradient-to-r from-green-700 to-green-900 text-white rounded-full shadow-lg hover:from-green-800 hover:to-green-950 transition font-semibold text-sm focus:outline-none focus:ring-2 focus:ring-green-400",onClick:()=>{let t=el.Wp.json_to_sheet(e.map(e=>{var t;return{ID:e.productID,"T\xean sản phẩm":e.productName,Giá:"".concat(null==(t=e.productPrice)?void 0:t.toLocaleString(),"₫"),"Tồn kho":e.quantityAvailable,"Số đơn h\xe0ng":e.orderCount}})),r=el.Wp.book_new();el.Wp.book_append_sheet(r,t,"Sản phẩm");let a=new Blob([el.M9(r,{bookType:"xlsx",type:"array"})],{type:"application/octet-stream"});(0,en.saveAs)(a,"danh-sach-san-pham.xlsx")},children:[(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-green-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,a.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",fill:"#21A366"}),(0,a.jsx)("path",{d:"M7 8l2.5 4L7 16",stroke:"#fff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M13 8h4M13 12h4M13 16h4",stroke:"#fff",strokeWidth:"1.5",strokeLinecap:"round"})]}),"Xuất Excel danh s\xe1ch sản phẩm"]})})]})};var ec=r(35695),ei=r(6368),ed=r(71007);let ex=()=>{let[e,t]=(0,s.useState)([]),[r,l]=(0,s.useState)(!0),[n,o]=(0,s.useState)(null),c=(0,ec.useRouter)();(0,s.useEffect)(()=>{(async()=>{try{l(!0),o(null);let e=await (0,X.cC)();t(e)}catch(e){o("Kh\xf4ng thể tải dữ liệu người d\xf9ng."),console.error("Error fetching top users:",e)}finally{l(!1)}})()},[]);let i=async(e,t)=>{try{let r=await (0,ei.cK)({conversationID:"".concat(e,"_").concat(Date.now()),conversationName:"Hỗ trợ kh\xe1ch h\xe0ng: ".concat(t),participants:[e],isGroup:!1});c.push("/vi/dashboard/chat?conversationID=".concat(r.conversationID))}catch(e){alert("Kh\xf4ng thể tạo cuộc tr\xf2 chuyện mới. Vui l\xf2ng thử lại."),console.error("Error creating conversation:",e)}};return(0,a.jsxs)("section",{className:"bg-white pt-8 pb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-primary",children:"Top 5 Kh\xe1ch H\xe0ng Đặt Nhiều Đơn Nhất"}),r?(0,a.jsx)("div",{className:"text-center py-8",children:"Đang tải..."}):n?(0,a.jsx)("div",{className:"text-center text-red-500 py-8",children:n}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6",children:e.map((e,t)=>(0,a.jsxs)("div",{className:"flex flex-col items-center bg-gradient-to-br from-blue-50 to-white border border-blue-100 rounded-xl p-5 shadow-md hover:shadow-xl transition",children:[(0,a.jsxs)("div",{className:"relative w-20 h-20 mb-3",children:[e.user.avatar?(0,a.jsx)($.default,{src:e.user.avatar,alt:e.user.username,fill:!0,className:"object-cover rounded-full border-4 border-primary shadow"}):(0,a.jsx)("div",{className:"flex items-center justify-center w-full h-full bg-gray-200 rounded-full border-4 border-primary shadow text-gray-500 text-4xl",children:(0,a.jsx)(ed.A,{className:"w-10 h-10"})}),(0,a.jsxs)("span",{className:"absolute -top-2 -right-2 bg-primary text-white text-xs px-2 py-1 rounded-full font-bold shadow",children:["#",t+1]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"font-semibold text-lg text-gray-800 mb-1 truncate max-w-[120px]",children:e.user.username}),(0,a.jsx)("div",{className:"text-gray-500 text-sm mb-1 truncate max-w-[140px]",children:e.user.email}),(0,a.jsxs)("div",{className:"text-primary font-bold text-xl mt-2",children:[e.orderCount," đơn h\xe0ng"]}),(0,a.jsx)("button",{className:"mt-3 px-4 py-2 bg-primary text-white rounded-full shadow hover:bg-primary-hover transition text-sm hover:cursor-pointer",onClick:()=>i(e.user.userID,e.user.username),children:"Nhắn tin cảm ơn"})]})]},e.userID))}),(0,a.jsx)("div",{className:"flex justify-end my-4",children:(0,a.jsxs)("button",{className:"flex items-center gap-2 px-5 py-2.5 hover:cursor-pointer bg-gradient-to-r from-green-700 to-green-900 text-white rounded-full shadow-lg hover:from-green-800 hover:to-green-950 transition font-semibold text-sm focus:outline-none focus:ring-2 focus:ring-green-400",onClick:()=>{let t=el.Wp.json_to_sheet(e.map((e,t)=>({"#":t+1,"T\xean kh\xe1ch h\xe0ng":e.user.username,Email:e.user.email,"Số đơn h\xe0ng":e.orderCount}))),r=el.Wp.book_new();el.Wp.book_append_sheet(r,t,"Top Users");let a=new Blob([el.M9(r,{bookType:"xlsx",type:"array"})],{type:"application/octet-stream"});(0,en.saveAs)(a,"top-5-khach-hang.xlsx")},children:[(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-green-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,a.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",fill:"#21A366"}),(0,a.jsx)("path",{d:"M7 8l2.5 4L7 16",stroke:"#fff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M13 8h4M13 12h4M13 16h4",stroke:"#fff",strokeWidth:"1.5",strokeLinecap:"round"})]}),"Xuất Excel danh s\xe1ch kh\xe1ch h\xe0ng"]})})]})},eh=()=>{let[e,t]=(0,s.useState)(0),[,r]=(0,s.useState)(0),[l,x]=(0,s.useState)(0),[p,f]=(0,s.useState)(!0),[b,j]=(0,s.useState)(0),[,y]=(0,s.useState)(0),[v,N]=(0,s.useState)(0),[w,k]=(0,s.useState)(!0),[S,A]=(0,s.useState)(0),[,D]=(0,s.useState)(0),[F,C]=(0,s.useState)(0),[M,E]=(0,s.useState)(!0),[L,_]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{!async function(){let e=(await (0,U.bo)()).filter(e=>"completed"===e.orderStatus),a=new Date,s=a.getMonth()+1,l=a.getFullYear(),n=1===s?12:s-1,o=1===s?l-1:l,c=e.filter(e=>{let t=new Date(e.createdAt);return t.getFullYear()===l&&t.getMonth()+1===s}).reduce((e,t)=>e+t.totalPayment,0),i=e.filter(e=>{let t=new Date(e.createdAt);return t.getFullYear()===o&&t.getMonth()+1===n}).reduce((e,t)=>e+t.totalPayment,0);t(c),r(i),0===i&&c>0?(x(100),f(!0)):0===i&&0===c?(x(0),f(!0)):(x(Math.abs(Number(((c-i)/i*100).toFixed(1)))),f(c>=i))}()},[]),(0,s.useEffect)(()=>{!async function(){let e=await (0,X.CF)(),t=new Date,r=t.getMonth()+1,a=t.getFullYear(),s=1===r?12:r-1,l=1===r?a-1:a,n=e.filter(e=>{let t=new Date(e.createdAt);return t.getFullYear()===a&&t.getMonth()+1===r}).length,o=e.filter(e=>{let t=new Date(e.createdAt);return t.getFullYear()===l&&t.getMonth()+1===s}).length;j(n),y(o),0===o&&n>0?(N(100),k(!0)):0===o&&0===n?(N(0),k(!0)):(N(Math.abs(Number(((n-o)/o*100).toFixed(1)))),k(n>=o))}()},[]),(0,s.useEffect)(()=>{!async function(){let e=new Date,t=e.getMonth()+1,r=e.getFullYear(),a=1===t?12:t-1,s=1===t?r-1:r,l=await (0,J.O)(),n=Array.isArray(l)?l:[l],o=n.find(e=>e.year===r&&e.month===t),c=n.find(e=>e.year===s&&e.month===a),i=o?o.accessCount:0,d=c?c.accessCount:0;A(i),D(d),0===d&&i>0?(C(100),E(!0)):0===d&&0===i?(C(0),E(!0)):(C(Math.abs(Number(((i-d)/d*100).toFixed(1)))),E(i>=d))}()},[]),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"grid auto-rows-min gap-4 md:grid-cols-3",children:[(0,a.jsxs)(n,{className:"from-green-600 to-blue-500 bg-gradient-to-br text-white",children:[(0,a.jsxs)(o,{children:[(0,a.jsx)(i,{className:"text-white",children:"Doanh thu"}),(0,a.jsxs)(c,{className:"text-2xl font-semibold tabular-nums @[250px]/card:text-3xl space-x-2",children:[(0,a.jsx)("span",{children:(0,W.A)(e)}),(0,a.jsx)("span",{className:"text-sm",children:"VND"})]}),(0,a.jsx)(d,{children:(0,a.jsxs)(u.E,{variant:"outline",className:"text-white",children:[p?(0,a.jsx)(m.A,{}):(0,a.jsx)(g.A,{}),p?"+":"-",l,"%"]})})]}),(0,a.jsxs)(h,{className:"flex-col items-start gap-1.5 text-sm",children:[(0,a.jsxs)("div",{className:"line-clamp-1 flex gap-2 font-medium",children:[p?"Doanh thu tăng trong th\xe1ng n\xe0y":"Doanh thu giảm trong th\xe1ng n\xe0y"," ",p?(0,a.jsx)(m.A,{className:"size-4"}):(0,a.jsx)(g.A,{className:"size-4"})]}),(0,a.jsx)("div",{className:"text-gray-300",children:"Dựa tr\xean số liệu b\xe1n h\xe0ng"})]})]}),(0,a.jsxs)(n,{className:"from-blue-500  to-pink-500 bg-gradient-to-br text-white",children:[(0,a.jsxs)(o,{children:[(0,a.jsx)(i,{className:"text-white",children:"Số lượt truy cập website"}),(0,a.jsxs)(c,{className:"text-2xl font-semibold tabular-nums @[250px]/card:text-3xl",children:[S<10?"0":"",S]}),(0,a.jsx)(d,{children:(0,a.jsxs)(u.E,{variant:"outline",className:"text-white",children:[M?(0,a.jsx)(m.A,{}):(0,a.jsx)(g.A,{}),M?"+":"-",F,"%"]})})]}),(0,a.jsxs)(h,{className:"flex-col items-start gap-1.5 text-sm",children:[(0,a.jsxs)("div",{className:"line-clamp-1 flex gap-2 font-medium",children:[M?"Tăng lượt truy cập trong th\xe1ng n\xe0y":"Giảm lượt truy cập trong th\xe1ng n\xe0y"," ",M?(0,a.jsx)(m.A,{className:"size-4"}):(0,a.jsx)(g.A,{className:"size-4"})]}),(0,a.jsx)("div",{className:"text-gray-300",children:"Dựa tr\xean số liệu truy cập"})]})]}),(0,a.jsxs)(n,{className:"from-yellow-500 to-red-500 bg-gradient-to-br text-white",children:[(0,a.jsxs)(o,{children:[(0,a.jsx)(i,{className:"text-white",children:"T\xe0i khoản mới"}),(0,a.jsxs)(c,{className:"text-2xl font-semibold tabular-nums @[250px]/card:text-3xl",children:[b<10?"0":"",b]}),(0,a.jsx)(d,{children:(0,a.jsxs)(u.E,{variant:"outline",className:"text-white",children:[w?(0,a.jsx)(m.A,{}):(0,a.jsx)(g.A,{}),w?"+":"-",v,"%"]})})]}),(0,a.jsxs)(h,{className:"flex-col items-start gap-1.5 text-sm",children:[(0,a.jsxs)("div",{className:"line-clamp-1 flex gap-2 font-medium",children:[w?"Tăng số t\xe0i khoản mới trong th\xe1ng n\xe0y":"Giảm số t\xe0i khoản mới trong th\xe1ng n\xe0y"," ",w?(0,a.jsx)(m.A,{className:"size-4"}):(0,a.jsx)(g.A,{className:"size-4"})]}),(0,a.jsx)("div",{className:"text-gray-300",children:"Dựa tr\xean số t\xe0i khoản tạo mới trong th\xe1ng"})]})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"",children:(0,a.jsx)(ex,{})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:(0,a.jsx)(es,{})}),(0,a.jsx)("div",{className:"flex justify-end mb-4",children:(0,a.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2.5 hover:cursor-pointer bg-gradient-to-r from-green-700 to-green-900 text-white rounded-full shadow-lg hover:from-green-800 hover:to-green-950 transition font-semibold text-sm focus:outline-none focus:ring-2 focus:ring-green-400",onClick:()=>_(!L),children:[(0,a.jsx)("span",{children:L?(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),"Hiển thị số đơn h\xe0ng tr\xean sản phẩm"]})}),L&&(0,a.jsx)(eo,{})]}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-primary mt-6 mb-4",children:"Thống K\xea Kh\xe1c"}),(0,a.jsxs)("div",{className:"min-h-[100vh] grid rounded-xl md:min-h-min mt-6 bg-white grid-rows-3 gap-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-[1fr_16px_1fr]",children:[(0,a.jsx)(O,{}),(0,a.jsx)("div",{}),(0,a.jsx)(V,{})]}),(0,a.jsx)(B,{}),(0,a.jsx)(T,{})]})]})}},32383:()=>{},50818:(e,t,r)=>{Promise.resolve().then(r.bind(r,22294))},83686:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[3524,4277,6231,1350,6766,56,6874,7168,8612,8441,1684,7358],()=>t(50818)),_N_E=e.O()}]);