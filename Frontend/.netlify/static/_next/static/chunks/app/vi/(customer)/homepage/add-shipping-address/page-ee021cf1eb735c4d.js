(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5191],{2930:(e,s,r)=>{Promise.resolve().then(r.bind(r,91077))},91077:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>u});var l=r(95155),n=r(12115),a=r(89179),i=r(25957),c=r(65816),t=r(74824),d=r(13568),o=r(89736),h=r(23043);function u(){let{user:e}=(0,a.J)(),[s,r]=(0,n.useState)({province:"",district:"",ward:"",detailAddress:"",phone:"",isDefault:!1}),[u,m]=(0,n.useState)([]),[x,b]=(0,n.useState)([]),[f,p]=(0,n.useState)([]),[g,v]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{try{let e=await (0,o.tN)();m(e)}catch(e){console.error("Error fetching provinces:",e)}})()},[]),(0,n.useEffect)(()=>{if(!s.province){b([]),p([]);return}let e=u.find(e=>e.name===s.province);e&&(async()=>{try{let s=await (0,o.Fi)(e.code);b(s)}catch(e){console.error("Error fetching districts:",e)}})()},[s.province,u]),(0,n.useEffect)(()=>{if(!s.district)return void p([]);let e=x.find(e=>e.name===s.district);e&&(async()=>{try{let s=await (0,o.RI)(e.code);p(s)}catch(e){console.error("Error fetching wards:",e)}})()},[s.district,x]);let j=e=>{let s=e.target,{name:l,value:n,type:a}=s,i=s.checked;r(e=>({...e,[l]:"checkbox"===a?i:n}))},y=async l=>{if(l.preventDefault(),!e||!e.userID)return void d.Ay.error("Bạn cần đăng nhập để th\xeam địa chỉ giao h\xe0ng.");v(!0);try{let l="".concat(s.detailAddress,", ").concat(s.ward,", ").concat(s.district,", ").concat(s.province);await (0,h.eQ)({userID:e.userID,address:l,phone:s.phone,isDefault:s.isDefault}),r({province:"",district:"",ward:"",detailAddress:"",phone:"",isDefault:!1}),d.Ay.success("Th\xeam địa chỉ giao h\xe0ng th\xe0nh c\xf4ng!")}catch(e){console.log(e)}finally{v(!1)}};return(0,l.jsxs)("div",{className:"px-6 py-10",children:[(0,l.jsx)(i.Qp,{items:[{label:"Trang chủ",href:"/"},{label:"Th\xeam địa chỉ giao h\xe0ng"}]}),(0,l.jsx)("h1",{className:"text-2xl font-bold mb-6 mt-6 uppercase text-center",children:"Th\xeam địa chỉ giao h\xe0ng mới"}),(0,l.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,l.jsxs)("form",{onSubmit:y,className:"space-y-3 my-7 border-[2px] border-gray-200 p-6 rounded-lg ",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 font-normal text-sm text-black/40",children:"Tỉnh/Th\xe0nh phố"}),(0,l.jsxs)(t.l6,{value:s.province,onValueChange:e=>r(s=>({...s,province:e,district:"",ward:""})),required:!0,disabled:0===u.length,children:[(0,l.jsx)(t.bq,{className:"w-full px-4 py-6 rounded-full border border-gray-300 focus:outline-none focus-visible:ring-1 focus-visible:ring-primary/50 focus:bg-white",children:(0,l.jsx)(t.yv,{placeholder:"Chọn tỉnh/th\xe0nh phố"})}),(0,l.jsx)(t.gC,{className:"max-h-60",children:(0,l.jsxs)(t.s3,{children:[(0,l.jsx)(t.TR,{children:"Tỉnh/Th\xe0nh phố"}),u.map(e=>(0,l.jsx)(t.eb,{value:e.name,children:e.name},e.code))]})})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 font-normal text-sm text-black/40",children:"Quận/Huyện"}),(0,l.jsxs)(t.l6,{value:s.district,onValueChange:e=>r(s=>({...s,district:e,ward:""})),required:!0,disabled:!s.province,children:[(0,l.jsx)(t.bq,{className:"w-full px-4 py-6 rounded-full border border-gray-300 focus:outline-none focus-visible:ring-1 focus-visible:ring-primary/50 focus:bg-white",disabled:!s.province,children:(0,l.jsx)(t.yv,{placeholder:"Chọn quận/huyện"})}),(0,l.jsx)(t.gC,{className:"max-h-60",children:(0,l.jsxs)(t.s3,{children:[(0,l.jsx)(t.TR,{children:"Quận/Huyện"}),x.map(e=>(0,l.jsx)(t.eb,{value:e.name,children:e.name},e.code))]})})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 font-normal text-sm text-black/40",children:"Phường/X\xe3"}),(0,l.jsxs)(t.l6,{value:s.ward,onValueChange:e=>r(s=>({...s,ward:e})),required:!0,disabled:!s.district,children:[(0,l.jsx)(t.bq,{className:"w-full px-4 py-6 rounded-full border border-gray-300 focus:outline-none focus-visible:ring-1 focus-visible:ring-primary/50 focus:bg-white",disabled:!s.district,children:(0,l.jsx)(t.yv,{placeholder:"Chọn phường/x\xe3"})}),(0,l.jsx)(t.gC,{className:"max-h-60",children:(0,l.jsxs)(t.s3,{children:[(0,l.jsx)(t.TR,{children:"Phường/X\xe3"}),f.map(e=>(0,l.jsx)(t.eb,{value:e.name,children:e.name},e.code))]})})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 font-normal text-sm text-black/40",children:"Địa chỉ cụ thể"}),(0,l.jsx)("input",{type:"text",name:"detailAddress",className:"w-full px-4 py-3 rounded-full border border-gray-300 focus:outline-none focus-visible:ring-1 focus-visible:ring-primary/50 focus:bg-white",value:s.detailAddress,onChange:j,required:!0,placeholder:"Nhập số nh\xe0, t\xean đường..."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-1 font-normal text-sm text-black/40",children:"Số điện thoại"}),(0,l.jsx)("input",{type:"text",name:"phone",className:"w-full px-4 py-3 rounded-full border border-gray-300 focus:outline-none focus-visible:ring-1 focus-visible:ring-primary/50 focus:bg-white",value:s.phone,onChange:j,required:!0,placeholder:"Nhập số điện thoại"})]}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",name:"isDefault",id:"isDefault",checked:s.isDefault,onChange:j,className:"mr-2"}),(0,l.jsx)("label",{htmlFor:"isDefault",children:"Đặt l\xe0m địa chỉ mặc định"})]}),(0,l.jsx)("div",{className:"flex justify-center mt-4",children:(0,l.jsx)(c.A,{type:"submit",className:"",disabled:g,children:g?"Đang lưu...":"Th\xeam địa chỉ"})})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[7935,6122,4277,3568,6231,1350,6766,56,1193,7625,2727,6874,4754,8037,4297,8612,5957,8441,1684,7358],()=>s(2930)),_N_E=e.O()}]);