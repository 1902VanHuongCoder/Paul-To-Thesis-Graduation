(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[501],{4596:(e,t,a)=>{"use strict";a.d(t,{cn:()=>s});var n=a(52596),r=a(39688);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,n.$)(t))}},13052:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(19946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},18290:(e,t,a)=>{"use strict";a.d(t,{A0:()=>i,BF:()=>o,Hj:()=>l,XI:()=>s,nA:()=>d,nd:()=>c,r6:()=>u});var n=a(95155);a(12115);var r=a(4596);function s(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,n.jsx)("table",{"data-slot":"table",className:(0,r.cn)("w-full caption-bottom text-sm",t),...a})})}function i(e){let{className:t,...a}=e;return(0,n.jsx)("thead",{"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b",t),...a})}function o(e){let{className:t,...a}=e;return(0,n.jsx)("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",t),...a})}function l(e){let{className:t,...a}=e;return(0,n.jsx)("tr",{"data-slot":"table-row",className:(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function c(e){let{className:t,...a}=e;return(0,n.jsx)("th",{"data-slot":"table-head",className:(0,r.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function d(e){let{className:t,...a}=e;return(0,n.jsx)("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function u(e){let{className:t,...a}=e;return(0,n.jsx)("caption",{"data-slot":"table-caption",className:(0,r.cn)("text-muted-foreground mt-4 text-sm",t),...a})}},20858:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});let n="https://paul-to-thesis-graduation-1.onrender.com"},21203:(e,t,a)=>{"use strict";a.d(t,{CF:()=>r,O7:()=>d,Oh:()=>m,Tq:()=>i,cC:()=>g,de:()=>x,eg:()=>u,ej:()=>h,iD:()=>s,kz:()=>o,lw:()=>f,md:()=>p,p3:()=>l,ug:()=>c});var n=a(20858);let r=async()=>{let e=await fetch("".concat(n.p,"/api/users"));if(!e.ok)throw Error("Failed to fetch users");return await e.json()},s=async(e,t)=>{let a=await fetch("".concat(n.p,"/api/users/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),r=await a.json();return 401===a.status?{status:"error",message:r.message,data:null,token:null}:{data:r.user,role:r.user.role,status:"success",token:r.token,isActive:r.user.isActive,message:"Login successful"}},i=async e=>{let t=await fetch("".concat(n.p,"/api/users/google"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Registration failed");return await t.json()},o=async(e,t,a,r)=>{let s=await fetch("".concat(n.p,"/api/users/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,shippingAddress:{address:t,phone:a,isDefault:r}})});return await s.json()},l=async e=>{let t=await fetch("".concat(n.p,"/api/users/google"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Google login failed");return await t.json()},c=async e=>{let t=await fetch("".concat(n.p,"/api/users/").concat(e));if(!t.ok)throw Error("Failed to fetch user info");return await t.json()},d=async(e,t)=>!!(await fetch("".concat(n.p,"/api/users/confirm-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userID:t,password:e})})).ok,u=async(e,t,a,r,s)=>{let i=await fetch("".concat(n.p,"/api/users/").concat(s),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,email:t,avatar:a,password:r})});if(!i.ok)throw Error("Failed to update user profile");return await i.json()},h=async(e,t)=>{let a=await fetch("".concat(n.p,"/api/users/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})});if(!a.ok)throw Error("Failed to update user profile");return await a.json()},p=async(e,t)=>{let a=await fetch("".concat(n.p,"/api/users/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!t})});if(!a.ok)throw Error("Failed to update user status");return a.ok},f=async e=>{let t=await fetch("".concat(n.p,"/api/users/").concat(e),{method:"DELETE"});return{message:(await t.json()).message,status:t.status}},m=async()=>{let e=await fetch("".concat(n.p,"/api/users/role/adm"));if(!e.ok)throw Error("Failed to fetch admins");return await e.json()},x=async(e,t)=>{let a=await fetch("".concat(n.p,"/api/users/check-recovery-code"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})});if(!a.ok)throw Error("Invalid recovery code");return await a.json()},g=async()=>{let e=await fetch("".concat(n.p,"/api/order/statistic/top-users"));if(!e.ok)throw Error("Failed to fetch top users by orders");return await e.json()}},26420:(e,t,a)=>{"use strict";a.d(t,{$:()=>l,r:()=>o});var n=a(95155);a(12115);var r=a(99708),s=a(74466),i=a(4596);let o=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:a,size:s,asChild:l=!1,...c}=e,d=l?r.DX:"button";return(0,n.jsx)(d,{"data-slot":"button",className:(0,i.cn)(o({variant:a,size:s,className:t})),...c})}},28905:(e,t,a)=>{"use strict";a.d(t,{C:()=>i});var n=a(12115),r=a(6101),s=a(52712),i=e=>{let{present:t,children:a}=e,i=function(e){var t,a;let[r,i]=n.useState(),l=n.useRef(null),c=n.useRef(e),d=n.useRef("none"),[u,h]=(t=e?"mounted":"unmounted",a={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},n.useReducer((e,t)=>{let n=a[e][t];return null!=n?n:e},t));return n.useEffect(()=>{let e=o(l.current);d.current="mounted"===u?e:"none"},[u]),(0,s.N)(()=>{let t=l.current,a=c.current;if(a!==e){let n=d.current,r=o(t);e?h("MOUNT"):"none"===r||(null==t?void 0:t.display)==="none"?h("UNMOUNT"):a&&n!==r?h("ANIMATION_OUT"):h("UNMOUNT"),c.current=e}},[e,h]),(0,s.N)(()=>{if(r){var e;let t,a=null!=(e=r.ownerDocument.defaultView)?e:window,n=e=>{let n=o(l.current).includes(e.animationName);if(e.target===r&&n&&(h("ANIMATION_END"),!c.current)){let e=r.style.animationFillMode;r.style.animationFillMode="forwards",t=a.setTimeout(()=>{"forwards"===r.style.animationFillMode&&(r.style.animationFillMode=e)})}},s=e=>{e.target===r&&(d.current=o(l.current))};return r.addEventListener("animationstart",s),r.addEventListener("animationcancel",n),r.addEventListener("animationend",n),()=>{a.clearTimeout(t),r.removeEventListener("animationstart",s),r.removeEventListener("animationcancel",n),r.removeEventListener("animationend",n)}}h("ANIMATION_END")},[r,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:n.useCallback(e=>{l.current=e?getComputedStyle(e):null,i(e)},[])}}(t),l="function"==typeof a?a({present:i.isPresent}):n.Children.only(a),c=(0,r.s)(i.ref,function(e){var t,a;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?e.ref:(r=(n=null==(a=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:a.get)&&"isReactWarning"in n&&n.isReactWarning)?e.props.ref:e.props.ref||e.ref}(l));return"function"==typeof a||i.isPresent?n.cloneElement(l,{ref:c}):null};function o(e){return(null==e?void 0:e.animationName)||"none"}i.displayName="Presence"},35695:(e,t,a)=>{"use strict";var n=a(18999);a.o(n,"useParams")&&a.d(t,{useParams:function(){return n.useParams}}),a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}}),a.o(n,"useSearchParams")&&a.d(t,{useSearchParams:function(){return n.useSearchParams}})},42355:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(19946).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},55279:(e,t,a)=>{"use strict";function n(e){let t=new Date(e),a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(r)}a.d(t,{A:()=>n})},62523:(e,t,a)=>{"use strict";a.d(t,{p:()=>s});var n=a(95155);a(12115);var r=a(4596);function s(e){let{className:t,type:a,...s}=e;return(0,n.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...s})}},62525:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(19946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},72062:(e,t,a)=>{Promise.resolve().then(a.bind(a,98282))},74324:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>u,Es:()=>p,HM:()=>c,L3:()=>f,c7:()=>h,lG:()=>i,rr:()=>m,zM:()=>o});var n=a(95155);a(12115);var r=a(87625),s=a(4596);function i(e){let{...t}=e;return(0,n.jsx)(r.bL,{"data-slot":"dialog",...t})}function o(e){let{...t}=e;return(0,n.jsx)(r.l9,{"data-slot":"dialog-trigger",...t})}function l(e){let{...t}=e;return(0,n.jsx)(r.ZL,{"data-slot":"dialog-portal",...t})}function c(e){let{...t}=e;return(0,n.jsx)(r.bm,{"data-slot":"dialog-close",...t})}function d(e){let{className:t,...a}=e;return(0,n.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,s.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function u(e){let{className:t,children:a,...i}=e;return(0,n.jsxs)(l,{"data-slot":"dialog-portal",children:[(0,n.jsx)(d,{}),(0,n.jsx)(r.UC,{"data-slot":"dialog-content",className:(0,s.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...i,children:a})]})}function h(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"dialog-header",className:(0,s.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function p(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"dialog-footer",className:(0,s.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function f(e){let{className:t,...a}=e;return(0,n.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,s.cn)("text-lg leading-none font-semibold",t),...a})}function m(e){let{className:t,...a}=e;return(0,n.jsx)(r.VY,{"data-slot":"dialog-description",className:(0,s.cn)("text-muted-foreground text-sm",t),...a})}},74824:(e,t,a)=>{"use strict";a.d(t,{TR:()=>f,bq:()=>h,eb:()=>m,gC:()=>p,l6:()=>c,s3:()=>d,yv:()=>u});var n=a(95155);a(12115);var r=a(67904),s=a(66474),i=a(5196),o=a(47863),l=a(4596);function c(e){let{...t}=e;return(0,n.jsx)(r.bL,{"data-slot":"select",...t})}function d(e){let{...t}=e;return(0,n.jsx)(r.YJ,{"data-slot":"select-group",...t})}function u(e){let{...t}=e;return(0,n.jsx)(r.WT,{"data-slot":"select-value",...t})}function h(e){let{className:t,size:a="default",children:i,...o}=e;return(0,n.jsxs)(r.l9,{"data-slot":"select-trigger","data-size":a,className:(0,l.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...o,children:[i,(0,n.jsx)(r.In,{asChild:!0,children:(0,n.jsx)(s.A,{className:"size-4 opacity-50"})})]})}function p(e){let{className:t,children:a,position:s="popper",...i}=e;return(0,n.jsx)(r.ZL,{children:(0,n.jsxs)(r.UC,{"data-slot":"select-content",className:(0,l.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...i,children:[(0,n.jsx)(x,{}),(0,n.jsx)(r.LM,{className:(0,l.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,n.jsx)(g,{})]})})}function f(e){let{className:t,...a}=e;return(0,n.jsx)(r.JU,{"data-slot":"select-label",className:(0,l.cn)("text-muted-foreground px-2 py-1.5 text-xs",t),...a})}function m(e){let{className:t,children:a,...s}=e;return(0,n.jsxs)(r.q7,{"data-slot":"select-item",className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...s,children:[(0,n.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,n.jsx)(r.VF,{children:(0,n.jsx)(i.A,{className:"size-4"})})}),(0,n.jsx)(r.p4,{children:a})]})}function x(e){let{className:t,...a}=e;return(0,n.jsx)(r.PP,{"data-slot":"select-scroll-up-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,n.jsx)(o.A,{className:"size-4"})})}function g(e){let{className:t,...a}=e;return(0,n.jsx)(r.wn,{"data-slot":"select-scroll-down-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,n.jsx)(s.A,{className:"size-4"})})}},88708:(e,t,a)=>{"use strict";a.d(t,{Eb:()=>h,Iu:()=>c,WA:()=>p,cU:()=>d,dK:()=>l,n$:()=>u});var n=a(95155);a(12115);var r=a(42355),s=a(13052),i=a(4596),o=a(26420);function l(e){let{className:t,...a}=e;return(0,n.jsx)("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:(0,i.cn)("mx-auto flex w-full justify-center",t),...a})}function c(e){let{className:t,...a}=e;return(0,n.jsx)("ul",{"data-slot":"pagination-content",className:(0,i.cn)("flex flex-row items-center gap-1",t),...a})}function d(e){let{...t}=e;return(0,n.jsx)("li",{"data-slot":"pagination-item",...t})}function u(e){let{className:t,isActive:a,size:r="icon",...s}=e;return(0,n.jsx)("a",{"aria-current":a?"page":void 0,"data-slot":"pagination-link","data-active":a,className:(0,i.cn)((0,o.r)({variant:a?"outline":"ghost",size:r}),t),...s})}function h(e){let{className:t,...a}=e;return(0,n.jsxs)(u,{"aria-label":"Go to previous page",size:"default",className:(0,i.cn)("gap-1 px-2.5 sm:pl-2.5",t),...a,children:[(0,n.jsx)(r.A,{}),(0,n.jsx)("span",{className:"hidden sm:block",children:"Previous"})]})}function p(e){let{className:t,...a}=e;return(0,n.jsxs)(u,{"aria-label":"Go to next page",size:"default",className:(0,i.cn)("gap-1 px-2.5 sm:pr-2.5",t),...a,children:[(0,n.jsx)("span",{className:"hidden sm:block",children:"Next"}),(0,n.jsx)(s.A,{})]})}},89179:(e,t,a)=>{"use strict";a.d(t,{J:()=>c,UserProvider:()=>l});var n=a(95155),r=a(35695),s=a(12115),i=a(13568);let o=(0,s.createContext)(void 0);function l(e){let{children:t}=e,a=(0,r.usePathname)(),l=(0,r.useRouter)(),[c,d]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=localStorage.getItem("user"),t=localStorage.getItem("admin");a.includes("dashboard")&&t?d(JSON.parse(t)):e&&d(JSON.parse(e))},[a]),(0,n.jsx)(o.Provider,{value:{user:c,setUser:d,logout:()=>{d(null),localStorage.removeItem("user"),a.includes("dashboard")&&localStorage.removeItem("admin"),l.push("/"),i.Ay.success("Đăng xuất th\xe0nh c\xf4ng!")}},children:t})}function c(){let e=(0,s.useContext)(o);if(!e)throw Error("useUser must be used within a UserProvider");return e}},98282:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>M});var n=a(95155),r=a(12115),s=a(18290),i=a(62523),o=a(85185),l=a(6101),c=a(46081),d=a(5845),u=a(45503),h=a(11275);a(47650);var p=a(99708),f=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=(0,p.TL)(`Primitive.${t}`),s=r.forwardRef((e,r)=>{let{asChild:s,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(s?a:t,{...i,ref:r})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),m="Switch",[x,g]=(0,c.A)(m),[v,b]=x(m),j=r.forwardRef((e,t)=>{let{__scopeSwitch:a,name:s,checked:i,defaultChecked:c,required:u,disabled:h,value:p="on",onCheckedChange:x,form:g,...b}=e,[j,y]=r.useState(null),w=(0,l.s)(t,e=>y(e)),A=r.useRef(!1),C=!j||g||!!j.closest("form"),[S,T]=(0,d.i)({prop:i,defaultProp:null!=c&&c,onChange:x,caller:m});return(0,n.jsxs)(v,{scope:a,checked:S,disabled:h,children:[(0,n.jsx)(f.button,{type:"button",role:"switch","aria-checked":S,"aria-required":u,"data-state":k(S),"data-disabled":h?"":void 0,disabled:h,value:p,...b,ref:w,onClick:(0,o.m)(e.onClick,e=>{T(e=>!e),C&&(A.current=e.isPropagationStopped(),A.current||e.stopPropagation())})}),C&&(0,n.jsx)(N,{control:j,bubbles:!A.current,name:s,value:p,checked:S,required:u,disabled:h,form:g,style:{transform:"translateX(-100%)"}})]})});j.displayName=m;var y="SwitchThumb",w=r.forwardRef((e,t)=>{let{__scopeSwitch:a,...r}=e,s=b(y,a);return(0,n.jsx)(f.span,{"data-state":k(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});w.displayName=y;var N=r.forwardRef((e,t)=>{let{__scopeSwitch:a,control:s,checked:i,bubbles:o=!0,...c}=e,d=r.useRef(null),p=(0,l.s)(d,t),f=(0,u.Z)(i),m=(0,h.X)(s);return r.useEffect(()=>{let e=d.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(f!==i&&t){let a=new Event("click",{bubbles:o});t.call(e,i),e.dispatchEvent(a)}},[f,i,o]),(0,n.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i,...c,tabIndex:-1,ref:p,style:{...c.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function k(e){return e?"checked":"unchecked"}N.displayName="SwitchBubbleInput";var A=a(4596);function C(e){let{className:t,...a}=e;return(0,n.jsx)(j,{"data-slot":"switch",className:(0,A.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,n.jsx)(w,{"data-slot":"switch-thumb",className:(0,A.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var S=a(74824),T=a(88708),E=a(62525),O=a(74324),I=a(13568),P=a(21203),D=a(55279),z=a(89179);function M(){let{user:e}=(0,z.J)(),[t,a]=r.useState([]),[o,l]=r.useState(""),[c,d]=r.useState(""),[u,h]=r.useState(!1),[p,f]=r.useState(""),[m,x]=r.useState(!0),[g,v]=r.useState(null),[b,j]=r.useState(!1),[y,w]=r.useState(null),[N,k]=r.useState(1),[A,M]=r.useState(10);r.useEffect(()=>{x(!0),(async()=>{try{let e=await (0,P.CF)();a(e)}catch(e){console.error("Error fetching users:",e),I.Ay.error("Kh\xf4ng thể tải danh s\xe1ch người d\xf9ng. Vui l\xf2ng thử lại sau.")}finally{x(!1)}})()},[]);let U=t.filter(e=>{let t=e.username.toLowerCase().includes(o.toLowerCase()),a=e.userID.toLowerCase().includes(c.toLowerCase()),n=!u||e.isActive,r="all"===p||!p||e.role===p;return t&&a&&n&&r}),_=Math.ceil(U.length/A),L=U.slice((N-1)*A,N*A),R=async e=>{v(e.userID);try{await (0,P.md)(e.userID,e.isActive)?(a(t=>t.map(t=>t.userID===e.userID?{...t,isActive:!t.isActive}:t)),I.Ay.success("Cập nhật trạng th\xe1i t\xe0i khoản ".concat(e.username," th\xe0nh c\xf4ng."))):I.Ay.error("Cập nhật trạng th\xe1i t\xe0i khoản thất bại.")}catch(e){I.Ay.error("Cập nhật trạng th\xe1i t\xe0i khoản thất bại."),console.error("Error updating user status:",e)}finally{v(null)}},F=async e=>{try{let{status:t,message:n}=await (0,P.lw)(e);200===t?(a(t=>t.filter(t=>t.userID!==e)),I.Ay.success(n)):I.Ay.error(n)}catch(e){alert("X\xf3a t\xe0i khoản thất bại."),console.error("Error deleting user:",e)}};return(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Danh S\xe1ch T\xe0i Khoản Người D\xf9ng"}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-4 mb-6 items-center",children:[(0,n.jsx)(i.p,{placeholder:"T\xecm kiếm bằng username...",value:o,onChange:e=>l(e.target.value),className:"max-w-xs"}),(0,n.jsx)(i.p,{placeholder:"T\xecm kiếm bằng UserID...",value:c,onChange:e=>d(e.target.value),className:"max-w-xs"}),(0,n.jsxs)("label",{className:"flex items-center gap-2 border-1 px-4 py-1.5 rounded-md",children:[(0,n.jsx)(C,{checked:u,onCheckedChange:h,id:"active-switch"}),(0,n.jsx)("span",{children:"Chỉ t\xe0i khoản c\xf2n hoạt động"})]}),(0,n.jsxs)(S.l6,{value:p,onValueChange:f,children:[(0,n.jsx)(S.bq,{className:"min-w-[140px]",children:(0,n.jsx)(S.yv,{placeholder:"Tất cả"})}),(0,n.jsx)(S.gC,{children:(0,n.jsxs)(S.s3,{children:[(0,n.jsx)(S.TR,{children:"Vai tr\xf2"}),(0,n.jsx)(S.eb,{value:"all",children:"Tất cả"}),(0,n.jsx)(S.eb,{value:"cus",children:"Kh\xe1ch h\xe0ng"}),(0,n.jsx)(S.eb,{value:"sta",children:"Nh\xe2n vi\xean"}),(0,n.jsx)(S.eb,{value:"adm",children:"Quản trị vi\xean"})]})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("label",{htmlFor:"records-per-page",className:"text-sm",children:"Hiển thị"}),(0,n.jsxs)(S.l6,{value:A.toString(),onValueChange:e=>{M(Number(e)),k(1)},children:[(0,n.jsx)(S.bq,{id:"records-per-page",className:"w-20",children:(0,n.jsx)(S.yv,{placeholder:"Số d\xf2ng"})}),(0,n.jsxs)(S.gC,{children:[(0,n.jsx)(S.eb,{value:"5",children:"5"}),(0,n.jsx)(S.eb,{value:"10",children:"10"}),(0,n.jsx)(S.eb,{value:"20",children:"20"}),(0,n.jsx)(S.eb,{value:"50",children:"50"})]})]}),(0,n.jsx)("span",{className:"text-sm",children:"d\xf2ng/trang"})]})]}),(0,n.jsxs)(s.XI,{children:[(0,n.jsx)(s.r6,{children:m?"Loading users...":0===U.length?"No users found.":null}),(0,n.jsx)(s.A0,{children:(0,n.jsxs)(s.Hj,{children:[(0,n.jsx)(s.nd,{children:"M\xe3 người d\xf9ng"}),(0,n.jsx)(s.nd,{children:"Username"}),(0,n.jsx)(s.nd,{children:"Địa chỉ email"}),(0,n.jsx)(s.nd,{children:"Vai tr\xf2"}),(0,n.jsx)(s.nd,{children:"Trạng th\xe1i"}),(0,n.jsx)(s.nd,{children:"Ng\xe0y tạo"}),(0,n.jsx)(s.nd,{className:"text-center",children:"H\xe0nh động"})]})}),(0,n.jsx)(s.BF,{children:L.map(t=>(0,n.jsxs)(s.Hj,{children:[(0,n.jsx)(s.nA,{children:t.userID}),(0,n.jsx)(s.nA,{className:"max-w-[120px] truncate",children:t.username}),(0,n.jsx)(s.nA,{children:t.email}),(0,n.jsx)(s.nA,{children:"adm"===t.role?"Quản trị vi\xean":"sta"===t.role?"Nh\xe2n vi\xean":"Kh\xe1ch h\xe0ng"}),(0,n.jsx)(s.nA,{children:(0,n.jsx)("button",{disabled:"adm"===t.role&&(null==e?void 0:e.userID)===t.userID,className:"px-3 py-1 rounded text-xs font-semibold transition-colors ".concat(t.isActive?"bg-green-700 text-white hover:bg-green-200":"bg-red-100 text-red-700 hover:bg-red-200"," disabled:opacity-50 hover:cursor-pointer"),onClick:()=>R(t),title:t.isActive?"V\xf4 hiệu h\xf3a t\xe0i khoản":"K\xedch hoạt t\xe0i khoản",children:g===t.userID?"...":t.isActive?"Đang hoạt động":"Đ\xe3 kh\xf3a"})}),(0,n.jsx)(s.nA,{children:(0,D.A)(t.createdAt)}),(0,n.jsx)(s.nA,{className:"flex justify-center items-center",children:(0,n.jsxs)(O.lG,{open:b&&(null==y?void 0:y.userID)===t.userID,onOpenChange:e=>{j(e),e||w(null)},children:[(0,n.jsx)(O.zM,{asChild:!0,children:(0,n.jsx)("button",{className:"p-2 rounded bg-red-100 text-red-700 hover:bg-red-200 transition-colors flex items-center justify-center hover:cursor-pointer",onClick:()=>{w(t),j(!0)},title:"X\xf3a t\xe0i khoản","aria-label":"X\xf3a t\xe0i khoản",children:(0,n.jsx)(E.A,{className:"w-4 h-4"})})}),(0,n.jsxs)(O.Cf,{children:[(0,n.jsxs)(O.c7,{children:[(0,n.jsx)(O.L3,{children:"X\xe1c nhận x\xf3a t\xe0i khoản"}),(0,n.jsxs)(O.rr,{children:["Bạn c\xf3 chắc chắn muốn x\xf3a t\xe0i khoản ",(0,n.jsx)("b",{children:t.username})," kh\xf4ng? X\xe1c nhận để tiến h\xe0nh x\xf3a t\xe0i khoản."]})]}),(0,n.jsxs)(O.Es,{children:[(0,n.jsx)(O.HM,{asChild:!0,children:(0,n.jsx)("button",{className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 text-gray-800 cursor-pointer",children:"Hủy"})}),(0,n.jsx)("button",{className:"px-4 py-2 rounded bg-red-600 text-white hover:bg-red-700 cursor-pointer",onClick:async()=>{await F(t.userID),j(!1),w(null)},children:"X\xf3a"})]})]})]})})]},t.userID))})]}),_>1&&(0,n.jsx)("div",{className:"mt-6 flex",children:(0,n.jsx)(T.dK,{className:"flex justify-start",children:(0,n.jsxs)(T.Iu,{children:[(0,n.jsx)(T.cU,{children:(0,n.jsx)(T.Eb,{href:"#",onClick:e=>{e.preventDefault(),k(e=>Math.max(1,e-1))},"aria-disabled":1===N,tabIndex:1===N?-1:0})}),Array.from({length:_}).map((e,t)=>(0,n.jsx)(T.cU,{children:(0,n.jsx)(T.n$,{href:"#",isActive:N===t+1,onClick:e=>{e.preventDefault(),k(t+1)},children:t+1})},t)),(0,n.jsx)(T.cU,{children:(0,n.jsx)(T.WA,{href:"#",onClick:e=>{e.preventDefault(),k(e=>Math.min(_,e+1))},"aria-disabled":N===_,tabIndex:N===_?-1:0})})]})})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4277,3568,6231,1350,56,7625,8441,1684,7358],()=>t(72062)),_N_E=e.O()}]);