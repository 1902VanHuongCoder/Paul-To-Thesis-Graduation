(()=>{var e={};e.id=7337,e.ids=[7337],e.modules={1017:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>a.a,__next_app__:()=>h,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=t(65239),i=t(48088),n=t(88170),a=t.n(n),o=t(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let d={children:["",{children:["vi",{children:["(administrator)",{children:["dashboard",{children:["origin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,46495)),"D:\\Learning Web\\Thesis\\Frontend\\src\\app\\vi\\(administrator)\\dashboard\\origin\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,41529)),"D:\\Learning Web\\Thesis\\Frontend\\src\\app\\vi\\(administrator)\\dashboard\\layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,15097)),"D:\\Learning Web\\Thesis\\Frontend\\src\\app\\vi\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["D:\\Learning Web\\Thesis\\Frontend\\src\\app\\vi\\(administrator)\\dashboard\\origin\\page.tsx"],h={require:t,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/vi/(administrator)/dashboard/origin/page",pathname:"/vi/dashboard/origin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},28630:(e,r,t)=>{Promise.resolve().then(t.bind(t,46495))},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},46495:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Learning Web\\\\Thesis\\\\Frontend\\\\src\\\\app\\\\vi\\\\(administrator)\\\\dashboard\\\\origin\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Learning Web\\Thesis\\Frontend\\src\\app\\vi\\(administrator)\\dashboard\\origin\\page.tsx","default")},48894:(e,r,t)=>{"use strict";t.r(r),t.d(r,{deleteAImage:()=>a,deleteMultipleImages:()=>o,uploadMultipleImages:()=>n,uploadSingleImage:()=>i});var s=t(85484);let i=async e=>{try{let r=new FormData;r.append("file",e);let t=await fetch(`${s.p}/api/upload`,{method:"POST",body:r});if(!t.ok)throw Error(`Failed to upload file: ${t.statusText}`);let i=await t.json();return i.url||i.path}catch(e){throw console.error("Error uploading file:",e),e}},n=async e=>{try{let r=new FormData;e.forEach(e=>r.append("files",e));let t=await fetch(`${s.p}/api/upload/multiple`,{method:"POST",body:r});if(!t.ok)throw Error(`Failed to upload files: ${t.statusText}`);return(await t.json()).files.map(e=>e.url)}catch(e){throw console.error("Error uploading files:",e),e}},a=async e=>{try{let r=await fetch(`${s.p}/api/upload/single-delete`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})});if(!r.ok)throw Error(`Failed to delete file: ${r.statusText}`)}catch(e){throw console.error("Error deleting file:",e),e}},o=async e=>{try{let r=await fetch(`${s.p}/api/upload/multi-delete`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({urls:e})});if(!r.ok)throw Error(`Failed to delete files: ${r.statusText}`)}catch(e){throw console.error("Error deleting files:",e),e}}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57175:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(62688).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},59666:(e,r,t)=>{"use strict";t.d(r,{A0:()=>a,BF:()=>o,Hj:()=>l,XI:()=>n,nA:()=>c,nd:()=>d,r6:()=>h});var s=t(60687);t(43210);var i=t(77272);function n({className:e,...r}){return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,i.cn)("w-full caption-bottom text-sm",e),...r})})}function a({className:e,...r}){return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,i.cn)("[&_tr]:border-b",e),...r})}function o({className:e,...r}){return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,i.cn)("[&_tr:last-child]:border-0",e),...r})}function l({className:e,...r}){return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,i.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...r})}function d({className:e,...r}){return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,i.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function c({className:e,...r}){return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,i.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function h({className:e,...r}){return(0,s.jsx)("caption",{"data-slot":"table-caption",className:(0,i.cn)("text-muted-foreground mt-4 text-sm",e),...r})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68542:(e,r,t)=>{Promise.resolve().then(t.bind(t,91305))},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},91305:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>f});var s=t(60687),i=t(43210),n=t(27605),a=t(97902),o=t(51156),l=t(59666),d=t(45234),c=t(7552),h=t(57175),u=t(96362),p=t(30474),m=t(37590),x=t(30606),g=t(48894);function f(){let e=(0,n.mN)(),{register:r,handleSubmit:t,reset:f,formState:{errors:b}}=e,[j,v]=(0,i.useState)([]),[y,N]=(0,i.useState)(null),[w,k]=(0,i.useState)(""),[A,I]=(0,i.useState)(null),[q,E]=(0,i.useState)(!1),[T,D]=(0,i.useState)(),C=async e=>{if(!e.image||0===e.image.length)return void m.Ay.error("H\xe3y chọn một ảnh nh\xe0 sản xuất");let r=await (0,g.uploadSingleImage)(e.image[0]),t=await (0,x.Mw)(e.originName,r);t?(m.Ay.success("Th\xeam xuất xứ th\xe0nh c\xf4ng!"),f(),v([...j,{originID:t.originID,originName:e.originName,originImage:r}])):m.Ay.error("Th\xeam xuất xứ thất bại. Vui l\xf2ng thử lại.")},P=async e=>{if(!e)return void m.Ay.error("M\xe3 sản phẩm kh\xf4ng tồn tại. H\xe3y thử lại.");let{message:r,status:t}=await (0,x.A3)(e);200===t?(m.Ay.success("Đ\xe3 x\xf3a xuất xứ th\xe0nh c\xf4ng!"),E(!1),v(j.filter(r=>r.originID!==e))):m.Ay.error(r)},_=e=>{N(e.originID),k(e.originName),I(null)},F=async e=>{let r="";if(A)try{r=await (0,g.uploadSingleImage)(A)}catch(e){m.Ay.error("Xảy ra lỗi khi tải ảnh l\xean."),console.error("Error uploading image:",e);return}try{if(r&&j.find(r=>r.originID===e)?.originImage){let r=j.find(r=>r.originID===e)?.originImage;r&&await (0,g.deleteAImage)(r)}}catch(e){m.Ay.error("Xảy ra lỗi khi x\xf3a ảnh cũ."),console.error("Error deleting old image:",e);return}try{await (0,x.gg)(e,w,r)?(m.Ay.success("Cập nhật nh\xe0 sản xuất th\xe0nh c\xf4ng!"),v(j.map(t=>t.originID===e?{...t,originName:w,originImage:r||t.originImage}:t)),N(null),(0,x.Uy)()):m.Ay.error("Cập nhật nh\xe0 sản xuất thất bại. Vui l\xf2ng thử lại.")}catch(e){m.Ay.error("Xảy ra lỗi khi cập nhật xuất xứ."),console.error("Error updating origin:",e);return}};return(0,s.jsxs)("main",{className:"",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Th\xeam Nh\xe0 Sản Xuất"}),(0,s.jsx)(n.Op,{...e,children:(0,s.jsxs)("form",{onSubmit:t(C),children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)(d.J,{className:"block mb-1 font-medium",children:"T\xean nh\xe0 sản xuất"}),(0,s.jsx)(a.p,{...r("originName",{required:!0}),placeholder:"Nhập t\xean nh\xe0 sản xuất"}),b.originName&&(0,s.jsx)("div",{className:"text-red-500 text-sm mt-1",children:"T\xean nh\xe0 sản xu\xe2t kh\xf4ng được ph\xe9p rỗng."})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)(d.J,{className:"block mb-1 font-medium",children:"Ảnh đại diện nh\xe0 sản xuất"}),(0,s.jsx)(a.p,{type:"file",...r("image",{required:!0})}),b.image&&(0,s.jsx)("div",{className:"text-red-500 text-sm mt-1",children:"Ảnh đại diện l\xe0 sản xuất l\xe0 bắt buộc."})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(o.$,{type:"submit",className:"mt-4",children:"Th\xeam nh\xe0 sản xuất"})})]})}),(0,s.jsx)("hr",{className:"my-6"}),(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Danh s\xe1ch nh\xe0 sản xuất"}),(0,s.jsxs)(l.XI,{children:[(0,s.jsx)(l.A0,{children:(0,s.jsxs)(l.Hj,{children:[(0,s.jsx)(l.nd,{children:"T\xean nh\xe0 sản xuất"}),(0,s.jsx)(l.nd,{children:"Ảnh đại diện/Logo"}),(0,s.jsx)(l.nd,{className:"w-32",children:"H\xe0nh động"})]})}),(0,s.jsx)(l.BF,{children:j.map(e=>(0,s.jsx)(l.Hj,{children:y===e.originID?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.nA,{children:(0,s.jsx)(a.p,{value:w,onChange:e=>k(e.target.value),className:"w-full"})}),(0,s.jsx)(l.nA,{children:(0,s.jsx)(a.p,{type:"file",onChange:e=>I(e.target.files?.[0]||null),className:"w-full"})}),(0,s.jsxs)(l.nA,{className:"flex gap-2",children:[(0,s.jsx)(o.$,{size:"sm",onClick:()=>F(e.originID),className:"hover:cursor-pointer",children:"Lưu"}),(0,s.jsx)(o.$,{size:"sm",variant:"outline",onClick:()=>N(null),className:"hover:cursor-pointer hover:bg-gray-200",children:"Hủy"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.nA,{className:"font-medium",children:e.originName}),(0,s.jsx)(l.nA,{children:e.originImage&&(0,s.jsx)(p.default,{width:400,height:400,src:e.originImage,alt:e.originName,className:"w-12 h-12 object-cover rounded"})}),(0,s.jsxs)(l.nA,{className:"flex gap-2",children:[(0,s.jsx)(o.$,{size:"sm",variant:"ghost",onClick:()=>_(e),className:"hover:cursor-pointer hover:bg-gray-200",children:(0,s.jsx)(h.A,{})}),(0,s.jsx)(o.$,{size:"sm",variant:"ghost",onClick:()=>{N(null),E(!0),D(e.originID)},className:"hover:cursor-pointer hover:bg-gray-200",children:(0,s.jsx)(u.A,{className:"text-red-500"})})]})]})},e.originID))})]}),(0,s.jsx)(c.lG,{open:q,onOpenChange:E,children:(0,s.jsxs)(c.Cf,{children:[(0,s.jsx)(c.c7,{children:(0,s.jsx)(c.L3,{children:"X\xe1c nhận x\xf3a xuất xứ"})}),(0,s.jsx)("div",{children:"Bạn c\xf3 chắc chắn muốn x\xf3a xuất xứ n\xe0y kh\xf4ng?"}),(0,s.jsxs)(c.Es,{children:[(0,s.jsx)(c.HM,{asChild:!0,children:(0,s.jsx)(o.$,{variant:"outline",className:"hover:cursor-pointer hover:bg-gray-200",children:"Hủy"})}),(0,s.jsx)(o.$,{variant:"destructive",onClick:()=>P(T),className:"hover:cursor-pointer ",children:"X\xf3a"})]})]})})]})}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96362:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(62688).A)("trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4447,4825,7076,4866,8601,177],()=>t(1017));module.exports=s})();