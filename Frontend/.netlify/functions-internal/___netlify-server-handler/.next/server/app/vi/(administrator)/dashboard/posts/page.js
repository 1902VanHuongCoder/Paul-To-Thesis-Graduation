(()=>{var e={};e.id=9078,e.ids=[9078],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},22043:(e,t,r)=>{Promise.resolve().then(r.bind(r,72410))},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},48894:(e,t,r)=>{"use strict";r.r(t),r.d(t,{deleteAImage:()=>n,deleteMultipleImages:()=>o,uploadMultipleImages:()=>a,uploadSingleImage:()=>i});var s=r(85484);let i=async e=>{try{let t=new FormData;t.append("file",e);let r=await fetch(`${s.p}/api/upload`,{method:"POST",body:t});if(!r.ok)throw Error(`Failed to upload file: ${r.statusText}`);let i=await r.json();return i.url||i.path}catch(e){throw console.error("Error uploading file:",e),e}},a=async e=>{try{let t=new FormData;e.forEach(e=>t.append("files",e));let r=await fetch(`${s.p}/api/upload/multiple`,{method:"POST",body:t});if(!r.ok)throw Error(`Failed to upload files: ${r.statusText}`);return(await r.json()).files.map(e=>e.url)}catch(e){throw console.error("Error uploading files:",e),e}},n=async e=>{try{let t=await fetch(`${s.p}/api/upload/single-delete`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})});if(!t.ok)throw Error(`Failed to delete file: ${t.statusText}`)}catch(e){throw console.error("Error deleting file:",e),e}},o=async e=>{try{let t=await fetch(`${s.p}/api/upload/multi-delete`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({urls:e})});if(!t.ok)throw Error(`Failed to delete files: ${t.statusText}`)}catch(e){throw console.error("Error deleting files:",e),e}}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56387:(e,t,r)=>{Promise.resolve().then(r.bind(r,85266))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},72410:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>L});var s=r(60687),i=r(43210),a=r(7203),n=r(56863),o=r(68418),l=r(2188),d=r(79801),c=r(84633),p=r(95704),h=r(44731),u=r(68174),x=r(2760),m=r(75917),g=r(56286),f=r(13659),y=r(25445),b=r(84963),v=r(94157),j=r(84082),w=r(65557),A=r(96046),N=r(30474),q=r(83103);let k=(0,r(62688).A)("circle-user-round",[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var E=r(13861),P=r(33872),T=r(51156),D=r(49384),_=r(85814),C=r.n(_),F=r(37590),I=r(73121),S=r(48894);function L(){let[e,t]=(0,i.useState)([]),r=(0,a.hG)({extensions:[n.A,o.A,l.Ay,d.Ay,h.Ay,u.A,x.A,m.A,g.A,y.A,f.Ay.configure({nested:!0}),p.A.configure({levels:[1,2,3,4,5,6],HTMLAttributes:{class:"text-gray-900 dark:text-white font-bold"}}),c.A.configure({types:["heading","paragraph"]}),A.A,b.Ay.configure({resizable:!0}),w.A,j.h,v.A],content:"<p>Hello World! \uD83C\uDF0E️</p>"}),_=async e=>{(0,F.Ay)(t=>(0,s.jsxs)("span",{children:["Bạn c\xf3 chắc muốn x\xf3a b\xe0i viết n\xe0y?",(0,s.jsxs)("div",{className:"mt-2 flex gap-2 justify-end",children:[(0,s.jsx)("button",{className:"px-3 py-1 rounded bg-red-500 text-white hover:bg-red-600",onClick:async()=>{F.Ay.dismiss(t.id);try{let t=await (0,I.K_)(e);if(!t)return void F.Ay.error("Kh\xf4ng lấy được th\xf4ng tin b\xe0i viết.",{position:"top-center"});let r=[t.titleImageUrl,...t.images||[]].filter(Boolean);r.length>0&&await (0,S.deleteMultipleImages)(r),await (0,I.rD)(e)?(F.Ay.success("Đ\xe3 x\xf3a b\xe0i viết th\xe0nh c\xf4ng!",{position:"top-center"}),L()):F.Ay.error("Kh\xf4ng x\xf3a được b\xe0i viết.",{position:"top-center"})}catch(e){console.error("Error deleting news:",e),F.Ay.error("X\xf3a b\xe0i viết thất bại. Vui l\xf2ng thử lại.",{position:"top-center"})}},children:"X\xf3a"}),(0,s.jsx)("button",{className:"px-3 py-1 rounded bg-gray-200 text-gray-700 hover:bg-gray-300",onClick:()=>F.Ay.dismiss(t.id),children:"Hủy"})]})]}),{duration:8e3,position:"top-center"})},L=async()=>{try{let e=await (0,I.Yn)();console.log("Fetched news data:",e),t(e)}catch(e){console.error("Error fetching news list:",e)}};return r?(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Danh S\xe1ch Tin Tức Cửa H\xe0ng"}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>(0,s.jsxs)("div",{className:"relative flex flex-col bg-white rounded-lg border p-4 gap-4 items-start sm:items-center",children:[(0,s.jsx)("div",{className:"flex flex-col items-center mr-4 absolute top-7 right-3 z-12",children:(0,s.jsxs)("div",{className:"w-18 h-18 rounded-full bg-yellow-400 flex flex-col items-center justify-center text-white font-bold text-lg mb-2",children:[(0,s.jsx)("span",{className:"text-2xl leading-none",children:String(new Date(e.createdAt).getDate()).padStart(2,"0")}),(0,s.jsx)("span",{className:"text-xs font-medium",children:new Date(e.createdAt).toLocaleString("en-US",{month:"short",year:"2-digit"})})]})}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col gap-4 items-start sm:items-center",children:[e.titleImageUrl&&(0,s.jsx)("div",{className:"w-full h-60 relative rounded-lg overflow-hidden",children:(0,s.jsx)(N.default,{width:400,height:400,src:e.titleImageUrl?e.titleImageUrl:q.A,alt:e.title,className:"object-cover w-full h-full hover:scale-105 transition-transform duration-200 ease-in-out z-10"})}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col gap-1 justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-2 text-xs text-gray-500 mb-1",children:[(0,s.jsxs)("span",{className:"flex items-center text-green-70",children:[(0,s.jsx)("span",{children:(0,s.jsx)(k,{height:16,className:"stroke-primary"})}),(0,s.jsx)("span",{className:" max-w-[100px] truncate",children:e.author.username})]}),(0,s.jsxs)("span",{className:"flex items-center text-green-70 ",children:[(0,s.jsx)("span",{children:(0,s.jsx)(E.A,{height:16,className:"stroke-primary"})}),(0,s.jsxs)("span",{children:[e.views?e.views:0," Lượt xem"]})]}),(0,s.jsxs)("span",{className:"flex items-center text-green-70",children:[(0,s.jsx)("span",{children:(0,s.jsx)(P.A,{height:14,className:"stroke-primary"})})," ",(0,s.jsxs)("span",{children:[e.comments.length," B\xecnh luận"]})]})]}),(0,s.jsx)("span",{className:"font-bold text-green-700 text-lg py-4 text-center",children:e.title.length>50?e.title.slice(0,50)+"...":e.title}),(0,s.jsx)("span",{className:"text-gray-700 text-sm mb-2 text-center",children:e.subtitle&&e.subtitle.length>80?e.subtitle.slice(0,80)+"...":e.subtitle})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 items-center mt-2 justify-between",children:[(0,s.jsx)("span",{className:(0,D.A)("text-xs px-2 py-1 rounded bg-gray-100",e.isPublished?"bg-green-100 text-green-700":""),children:e.isPublished?"C\xf4ng khai":"Nh\xe1p"}),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)(C(),{href:`/vi/dashboard/posts/edit-post/${e.newsID}`,className:"px-2 bg-gray-100 py-1 rounded-md cursor-pointer hover:bg-gray-200",children:"Sửa"}),(0,s.jsx)(T.$,{size:"sm",variant:"destructive",onClick:()=>_(e.newsID),className:"cursor-pointer ",children:"X\xf3a"})]})]})]})]})]},e.newsID))}),(0,s.jsx)("div",{className:"my-4 flex justify-end mt-8",children:(0,s.jsx)(C(),{className:"bg-primary text-white py-2 px-4 rounded-md",href:"/vi/dashboard/posts/add-post",children:"Th\xeam b\xe0i viết mới"})})]}):null}},74075:e=>{"use strict";e.exports=require("zlib")},78383:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>h,tree:()=>d});var s=r(65239),i=r(48088),a=r(88170),n=r.n(a),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d={children:["",{children:["vi",{children:["(administrator)",{children:["dashboard",{children:["posts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,85266)),"D:\\Learning Web\\Thesis\\Frontend\\src\\app\\vi\\(administrator)\\dashboard\\posts\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,41529)),"D:\\Learning Web\\Thesis\\Frontend\\src\\app\\vi\\(administrator)\\dashboard\\layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,15097)),"D:\\Learning Web\\Thesis\\Frontend\\src\\app\\vi\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["D:\\Learning Web\\Thesis\\Frontend\\src\\app\\vi\\(administrator)\\dashboard\\posts\\page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/vi/(administrator)/dashboard/posts/page",pathname:"/vi/dashboard/posts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},85266:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Learning Web\\\\Thesis\\\\Frontend\\\\src\\\\app\\\\vi\\\\(administrator)\\\\dashboard\\\\posts\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Learning Web\\Thesis\\Frontend\\src\\app\\vi\\(administrator)\\dashboard\\posts\\page.tsx","default")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,4825,7076,4866,785,9553,8601,177],()=>r(78383));module.exports=s})();