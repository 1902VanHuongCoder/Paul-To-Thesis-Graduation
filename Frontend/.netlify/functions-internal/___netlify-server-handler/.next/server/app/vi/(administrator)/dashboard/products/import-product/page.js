(()=>{var e={};e.id=3787,e.ids=[3787],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9771:(e,t,r)=>{Promise.resolve().then(r.bind(r,20265))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13139:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Learning Web\\\\Thesis\\\\Frontend\\\\src\\\\app\\\\vi\\\\(administrator)\\\\dashboard\\\\products\\\\import-product\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Learning Web\\Thesis\\Frontend\\src\\app\\vi\\(administrator)\\dashboard\\products\\import-product\\page.tsx","default")},15347:(e,t,r)=>{Promise.resolve().then(r.bind(r,13139))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20265:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(60687),a=r(43210),n=r(30474),i=r(85484),o=r(51156),c=r(97902),l=r(59666),d=r(91282),u=r(34882),p=r(36027),h=r(37590),x=r(59785);function m(){let{user:e}=(0,p.J)(),[t,r]=(0,a.useState)(""),[m,b]=(0,a.useState)([]),[g,v]=(0,a.useState)(""),[f,j]=(0,a.useState)(!1),[y,q]=(0,a.useState)(""),[N,w]=(0,a.useState)("");(0,a.useRef)(y),(0,a.useRef)(null);let A=(0,a.useRef)(f),P=(0,a.useRef)([]),k=async e=>{try{let t=await (0,x.iG)(A.current,e);b(e=>[...e,t])}catch(e){console.error("Error fetching product:",e),v("Kh\xf4ng t\xecm thấy sản phẩm với m\xe3 vạch n\xe0y. Thử nhập thủ c\xf4ng hoặc kiểm tra lại m\xe3 vạch.")}},_=e=>{let t=e.trim().slice(0,12);A.current?P.current.find(e=>e.boxBarcode===t)?b(P.current.map(e=>e.boxBarcode===t?{...e,quantityAvailable:e.quantityAvailable+e.quantityPerBox}:e)):k(t):P.current.find(e=>e.barcode===t)?b(P.current.map(e=>e.barcode===t?{...e,quantityAvailable:e.quantityAvailable+1}:e)):k(t)},C=async()=>{if(!e)return void h.Ay.error("Bạn cần đăng nhập để thực hiện thao t\xe1c n\xe0y.");try{await fetch(`${i.p}/api/product/update/quantity`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(m.map(r=>({productID:r.productID,performedBy:e.userID,note:t,quantityAvailable:r.quantityAvailable})))})?(b([]),w(""),h.Ay.success("Cập nhật số lượng th\xe0nh c\xf4ng!")):h.Ay.error("Cập nhật số lượng thất bại!")}catch(e){console.error("Error updating product quantity:",e),h.Ay.error("C\xf3 lỗi xảy ra khi cập nhật số lượng!")}};return(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Nhập Kho Sản Phẩm Sử Dụng M\xe1y Qu\xe9t"}),(0,s.jsx)("p",{className:"mb-2 text-gray-600",children:"Sử dụng m\xe1y qu\xe9t m\xe3 vạch để qu\xe9t m\xe3 vạch tr\xean sản phẩm. Nhập thủ c\xf4ng nếu m\xe3 vạch mờ, lỗi."}),(0,s.jsxs)("div",{className:"flex gap-x-2",children:[(0,s.jsx)(c.p,{type:"text",value:N,onChange:e=>w(e.target.value),placeholder:"Qu\xe9t m\xe3 vạch sản phẩm hoặc th\xf9ng",className:"w-full p-2 border rounded mb-4",autoFocus:!0}),(0,s.jsx)(o.$,{variant:"default",className:"hover:cursor-pointer",onClick:()=>_(N.slice(0,12)),children:"Th\xeam"})]}),(0,s.jsxs)("div",{className:"flex gap-x-6 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Qu\xe9t từng sản phẩm"}),(0,s.jsx)("span",{className:`w-3 h-3 rounded-full ${!f?"bg-green-500":"bg-gray-300"}`})]}),(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Qu\xe9t l\xf4/th\xf9ng"}),(0,s.jsx)("span",{className:`w-3 h-3 rounded-full ${f?"bg-green-500":"bg-gray-300"}`})]})]}),g&&(0,s.jsx)("p",{className:"my-4 text-red-600",children:g}),m.length>0&&(0,s.jsxs)(l.XI,{children:[(0,s.jsx)(l.A0,{children:(0,s.jsxs)(l.Hj,{children:[(0,s.jsx)(l.nd,{children:"H\xecnh ảnh"}),(0,s.jsx)(l.nd,{children:"T\xean sản phẩm"}),(0,s.jsx)(l.nd,{children:"M\xe3 vạch"}),(0,s.jsx)(l.nd,{children:"Gi\xe1"}),(0,s.jsx)(l.nd,{children:"Gi\xe1 giảm"}),(0,s.jsx)(l.nd,{className:"text-center",children:"Số lượng"})]})}),(0,s.jsx)(l.BF,{children:m.map(e=>(0,s.jsxs)(l.Hj,{children:[(0,s.jsx)(l.nA,{children:e.images&&e.images.length>0&&(0,s.jsx)("div",{className:"flex gap-2",children:e.images.map((e,t)=>(0,s.jsx)(n.default,{src:e,width:64,height:64,alt:"Product image",className:"w-16 h-16 object-cover rounded border"},t))})}),(0,s.jsx)(l.nA,{children:e.productName}),(0,s.jsx)(l.nA,{children:e.barcode}),(0,s.jsxs)(l.nA,{children:[e.productPrice," VND"]}),(0,s.jsxs)(l.nA,{children:[e.productPriceSale," VND"]}),(0,s.jsx)(l.nA,{className:"text-center",children:(0,s.jsx)(d.N,{mode:"wait",children:(0,s.jsx)(u.P.span,{initial:{scale:1},animate:{scale:1.3,transition:{duration:.01}},exit:{scale:1.6},transition:{type:"spring",stiffness:700,damping:15,duration:.01},style:{display:"inline-block"},children:e.quantityAvailable},e.quantityAvailable)})})]},e.barcode))})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center gap-x-2",children:[(0,s.jsx)(c.p,{type:"text",value:t,onChange:e=>r(e.target.value),placeholder:"Ghi ch\xfa cho thao t\xe1c nhập kho",className:"w-full p-2 border rounded",autoFocus:!0}),(0,s.jsx)(o.$,{onClick:C,disabled:0===m.length,variant:"default",className:"hover:cursor-pointer",children:"Cập nhật số lượng trong kho"})]})]})}},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},59411:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>l});var s=r(65239),a=r(48088),n=r(88170),i=r.n(n),o=r(30893),c={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);r.d(t,c);let l={children:["",{children:["vi",{children:["(administrator)",{children:["dashboard",{children:["products",{children:["import-product",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,13139)),"D:\\Learning Web\\Thesis\\Frontend\\src\\app\\vi\\(administrator)\\dashboard\\products\\import-product\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,41529)),"D:\\Learning Web\\Thesis\\Frontend\\src\\app\\vi\\(administrator)\\dashboard\\layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,15097)),"D:\\Learning Web\\Thesis\\Frontend\\src\\app\\vi\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["D:\\Learning Web\\Thesis\\Frontend\\src\\app\\vi\\(administrator)\\dashboard\\products\\import-product\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/vi/(administrator)/dashboard/products/import-product/page",pathname:"/vi/dashboard/products/import-product",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},59666:(e,t,r)=>{"use strict";r.d(t,{A0:()=>i,BF:()=>o,Hj:()=>c,XI:()=>n,nA:()=>d,nd:()=>l,r6:()=>u});var s=r(60687);r(43210);var a=r(77272);function n({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...t})})}function i({className:e,...t}){return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...t})}function o({className:e,...t}){return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...t})}function c({className:e,...t}){return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function l({className:e,...t}){return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function d({className:e,...t}){return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function u({className:e,...t}){return(0,s.jsx)("caption",{"data-slot":"table-caption",className:(0,a.cn)("text-muted-foreground mt-4 text-sm",e),...t})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,4825,7076,4866,8601,177],()=>r(59411));module.exports=s})();