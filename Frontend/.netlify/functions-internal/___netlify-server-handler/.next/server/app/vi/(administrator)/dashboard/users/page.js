(()=>{var e={};e.id=501,e.ids=[501],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6242:(e,t,r)=>{Promise.resolve().then(r.bind(r,46922))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14967:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c});var s=r(65239),n=r(48088),a=r(88170),i=r.n(a),l=r(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c={children:["",{children:["vi",{children:["(administrator)",{children:["dashboard",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,69881)),"D:\\Learning Web\\Thesis\\Frontend\\src\\app\\vi\\(administrator)\\dashboard\\users\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,41529)),"D:\\Learning Web\\Thesis\\Frontend\\src\\app\\vi\\(administrator)\\dashboard\\layout.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,15097)),"D:\\Learning Web\\Thesis\\Frontend\\src\\app\\vi\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["D:\\Learning Web\\Thesis\\Frontend\\src\\app\\vi\\(administrator)\\dashboard\\users\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/vi/(administrator)/dashboard/users/page",pathname:"/vi/dashboard/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},46922:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>L});var s=r(60687),n=r(43210),a=r(59666),i=r(89667),l=r(70569),o=r(98599),c=r(11273),d=r(65551),u=r(83721),h=r(18853);r(51215);var x=r(8730),p=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,x.TL)(`Primitive.${t}`),a=n.forwardRef((e,n)=>{let{asChild:a,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(a?r:t,{...i,ref:n})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),m="Switch",[b,g]=(0,c.A)(m),[f,v]=b(m),j=n.forwardRef((e,t)=>{let{__scopeSwitch:r,name:a,checked:i,defaultChecked:c,required:u,disabled:h,value:x="on",onCheckedChange:b,form:g,...v}=e,[j,y]=n.useState(null),k=(0,o.s)(t,e=>y(e)),A=n.useRef(!1),C=!j||g||!!j.closest("form"),[D,q]=(0,d.i)({prop:i,defaultProp:c??!1,onChange:b,caller:m});return(0,s.jsxs)(f,{scope:r,checked:D,disabled:h,children:[(0,s.jsx)(p.button,{type:"button",role:"switch","aria-checked":D,"aria-required":u,"data-state":N(D),"data-disabled":h?"":void 0,disabled:h,value:x,...v,ref:k,onClick:(0,l.m)(e.onClick,e=>{q(e=>!e),C&&(A.current=e.isPropagationStopped(),A.current||e.stopPropagation())})}),C&&(0,s.jsx)(w,{control:j,bubbles:!A.current,name:a,value:x,checked:D,required:u,disabled:h,form:g,style:{transform:"translateX(-100%)"}})]})});j.displayName=m;var y="SwitchThumb",k=n.forwardRef((e,t)=>{let{__scopeSwitch:r,...n}=e,a=v(y,r);return(0,s.jsx)(p.span,{"data-state":N(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});k.displayName=y;var w=n.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:a=!0,...i},l)=>{let c=n.useRef(null),d=(0,o.s)(c,l),x=(0,u.Z)(r),p=(0,h.X)(t);return n.useEffect(()=>{let e=c.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(x!==r&&t){let s=new Event("click",{bubbles:a});t.call(e,r),e.dispatchEvent(s)}},[x,r,a]),(0,s.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:d,style:{...i.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function N(e){return e?"checked":"unchecked"}w.displayName="SwitchBubbleInput";var A=r(77272);function C({className:e,...t}){return(0,s.jsx)(j,{"data-slot":"switch",className:(0,A.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,s.jsx)(k,{"data-slot":"switch-thumb",className:(0,A.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var D=r(23020),q=r(48405),I=r(88233),P=r(7552),S=r(37590),_=r(23045),E=r(54007),T=r(36027);function L(){let{user:e}=(0,T.J)(),[t,r]=n.useState([]),[l,o]=n.useState(""),[c,d]=n.useState(""),[u,h]=n.useState(!1),[x,p]=n.useState(""),[m,b]=n.useState(!0),[g,f]=n.useState(null),[v,j]=n.useState(!1),[y,k]=n.useState(null),[w,N]=n.useState(1),[A,L]=n.useState(10);n.useEffect(()=>{b(!0),(async()=>{try{let e=await (0,_.CF)();r(e)}catch(e){console.error("Error fetching users:",e),S.Ay.error("Kh\xf4ng thể tải danh s\xe1ch người d\xf9ng. Vui l\xf2ng thử lại sau.")}finally{b(!1)}})()},[]);let M=t.filter(e=>{let t=e.username.toLowerCase().includes(l.toLowerCase()),r=e.userID.toLowerCase().includes(c.toLowerCase()),s=!u||e.isActive,n="all"===x||!x||e.role===x;return t&&r&&s&&n}),X=Math.ceil(M.length/A),F=M.slice((w-1)*A,w*A),R=async e=>{f(e.userID);try{await (0,_.md)(e.userID,e.isActive)?(r(t=>t.map(t=>t.userID===e.userID?{...t,isActive:!t.isActive}:t)),S.Ay.success(`Cập nhật trạng th\xe1i t\xe0i khoản ${e.username} th\xe0nh c\xf4ng.`)):S.Ay.error("Cập nhật trạng th\xe1i t\xe0i khoản thất bại.")}catch(e){S.Ay.error("Cập nhật trạng th\xe1i t\xe0i khoản thất bại."),console.error("Error updating user status:",e)}finally{f(null)}},G=async e=>{try{let{status:t,message:s}=await (0,_.lw)(e);200===t?(r(t=>t.filter(t=>t.userID!==e)),S.Ay.success(s)):S.Ay.error(s)}catch(e){alert("X\xf3a t\xe0i khoản thất bại."),console.error("Error deleting user:",e)}};return(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Danh S\xe1ch T\xe0i Khoản Người D\xf9ng"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 mb-6 items-center",children:[(0,s.jsx)(i.p,{placeholder:"T\xecm kiếm bằng username...",value:l,onChange:e=>o(e.target.value),className:"max-w-xs"}),(0,s.jsx)(i.p,{placeholder:"T\xecm kiếm bằng UserID...",value:c,onChange:e=>d(e.target.value),className:"max-w-xs"}),(0,s.jsxs)("label",{className:"flex items-center gap-2 border-1 px-4 py-1.5 rounded-md",children:[(0,s.jsx)(C,{checked:u,onCheckedChange:h,id:"active-switch"}),(0,s.jsx)("span",{children:"Chỉ t\xe0i khoản c\xf2n hoạt động"})]}),(0,s.jsxs)(D.l6,{value:x,onValueChange:p,children:[(0,s.jsx)(D.bq,{className:"min-w-[140px]",children:(0,s.jsx)(D.yv,{placeholder:"Tất cả"})}),(0,s.jsx)(D.gC,{children:(0,s.jsxs)(D.s3,{children:[(0,s.jsx)(D.TR,{children:"Vai tr\xf2"}),(0,s.jsx)(D.eb,{value:"all",children:"Tất cả"}),(0,s.jsx)(D.eb,{value:"cus",children:"Kh\xe1ch h\xe0ng"}),(0,s.jsx)(D.eb,{value:"sta",children:"Nh\xe2n vi\xean"}),(0,s.jsx)(D.eb,{value:"adm",children:"Quản trị vi\xean"})]})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{htmlFor:"records-per-page",className:"text-sm",children:"Hiển thị"}),(0,s.jsxs)(D.l6,{value:A.toString(),onValueChange:e=>{L(Number(e)),N(1)},children:[(0,s.jsx)(D.bq,{id:"records-per-page",className:"w-20",children:(0,s.jsx)(D.yv,{placeholder:"Số d\xf2ng"})}),(0,s.jsxs)(D.gC,{children:[(0,s.jsx)(D.eb,{value:"5",children:"5"}),(0,s.jsx)(D.eb,{value:"10",children:"10"}),(0,s.jsx)(D.eb,{value:"20",children:"20"}),(0,s.jsx)(D.eb,{value:"50",children:"50"})]})]}),(0,s.jsx)("span",{className:"text-sm",children:"d\xf2ng/trang"})]})]}),(0,s.jsxs)(a.XI,{children:[(0,s.jsx)(a.r6,{children:m?"Loading users...":0===M.length?"No users found.":null}),(0,s.jsx)(a.A0,{children:(0,s.jsxs)(a.Hj,{children:[(0,s.jsx)(a.nd,{children:"M\xe3 người d\xf9ng"}),(0,s.jsx)(a.nd,{children:"Username"}),(0,s.jsx)(a.nd,{children:"Địa chỉ email"}),(0,s.jsx)(a.nd,{children:"Vai tr\xf2"}),(0,s.jsx)(a.nd,{children:"Trạng th\xe1i"}),(0,s.jsx)(a.nd,{children:"Ng\xe0y tạo"}),(0,s.jsx)(a.nd,{className:"text-center",children:"H\xe0nh động"})]})}),(0,s.jsx)(a.BF,{children:F.map(t=>(0,s.jsxs)(a.Hj,{children:[(0,s.jsx)(a.nA,{children:t.userID}),(0,s.jsx)(a.nA,{className:"max-w-[120px] truncate",children:t.username}),(0,s.jsx)(a.nA,{children:t.email}),(0,s.jsx)(a.nA,{children:"adm"===t.role?"Quản trị vi\xean":"sta"===t.role?"Nh\xe2n vi\xean":"Kh\xe1ch h\xe0ng"}),(0,s.jsx)(a.nA,{children:(0,s.jsx)("button",{disabled:"adm"===t.role&&e?.userID===t.userID,className:`px-3 py-1 rounded text-xs font-semibold transition-colors ${t.isActive?"bg-green-700 text-white hover:bg-green-200":"bg-red-100 text-red-700 hover:bg-red-200"} disabled:opacity-50 hover:cursor-pointer`,onClick:()=>R(t),title:t.isActive?"V\xf4 hiệu h\xf3a t\xe0i khoản":"K\xedch hoạt t\xe0i khoản",children:g===t.userID?"...":t.isActive?"Đang hoạt động":"Đ\xe3 kh\xf3a"})}),(0,s.jsx)(a.nA,{children:(0,E.A)(t.createdAt)}),(0,s.jsx)(a.nA,{className:"flex justify-center items-center",children:(0,s.jsxs)(P.lG,{open:v&&y?.userID===t.userID,onOpenChange:e=>{j(e),e||k(null)},children:[(0,s.jsx)(P.zM,{asChild:!0,children:(0,s.jsx)("button",{className:"p-2 rounded bg-red-100 text-red-700 hover:bg-red-200 transition-colors flex items-center justify-center hover:cursor-pointer",onClick:()=>{k(t),j(!0)},title:"X\xf3a t\xe0i khoản","aria-label":"X\xf3a t\xe0i khoản",children:(0,s.jsx)(I.A,{className:"w-4 h-4"})})}),(0,s.jsxs)(P.Cf,{children:[(0,s.jsxs)(P.c7,{children:[(0,s.jsx)(P.L3,{children:"X\xe1c nhận x\xf3a t\xe0i khoản"}),(0,s.jsxs)(P.rr,{children:["Bạn c\xf3 chắc chắn muốn x\xf3a t\xe0i khoản ",(0,s.jsx)("b",{children:t.username})," kh\xf4ng? X\xe1c nhận để tiến h\xe0nh x\xf3a t\xe0i khoản."]})]}),(0,s.jsxs)(P.Es,{children:[(0,s.jsx)(P.HM,{asChild:!0,children:(0,s.jsx)("button",{className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300 text-gray-800 cursor-pointer",children:"Hủy"})}),(0,s.jsx)("button",{className:"px-4 py-2 rounded bg-red-600 text-white hover:bg-red-700 cursor-pointer",onClick:async()=>{await G(t.userID),j(!1),k(null)},children:"X\xf3a"})]})]})]})})]},t.userID))})]}),X>1&&(0,s.jsx)("div",{className:"mt-6 flex",children:(0,s.jsx)(q.dK,{className:"flex justify-start",children:(0,s.jsxs)(q.Iu,{children:[(0,s.jsx)(q.cU,{children:(0,s.jsx)(q.Eb,{href:"#",onClick:e=>{e.preventDefault(),N(e=>Math.max(1,e-1))},"aria-disabled":1===w,tabIndex:1===w?-1:0})}),Array.from({length:X}).map((e,t)=>(0,s.jsx)(q.cU,{children:(0,s.jsx)(q.n$,{href:"#",isActive:w===t+1,onClick:e=>{e.preventDefault(),N(t+1)},children:t+1})},t)),(0,s.jsx)(q.cU,{children:(0,s.jsx)(q.WA,{href:"#",onClick:e=>{e.preventDefault(),N(e=>Math.min(X,e+1))},"aria-disabled":w===X,tabIndex:w===X?-1:0})})]})})})]})}},48405:(e,t,r)=>{"use strict";r.d(t,{dK:()=>o,Iu:()=>c,cU:()=>d,n$:()=>u,WA:()=>x,Eb:()=>h});var s=r(60687);r(43210);let n=(0,r(62688).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var a=r(14952),i=r(77272),l=r(51156);function o({className:e,...t}){return(0,s.jsx)("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:(0,i.cn)("mx-auto flex w-full justify-center",e),...t})}function c({className:e,...t}){return(0,s.jsx)("ul",{"data-slot":"pagination-content",className:(0,i.cn)("flex flex-row items-center gap-1",e),...t})}function d({...e}){return(0,s.jsx)("li",{"data-slot":"pagination-item",...e})}function u({className:e,isActive:t,size:r="icon",...n}){return(0,s.jsx)("a",{"aria-current":t?"page":void 0,"data-slot":"pagination-link","data-active":t,className:(0,i.cn)((0,l.r)({variant:t?"outline":"ghost",size:r}),e),...n})}function h({className:e,...t}){return(0,s.jsxs)(u,{"aria-label":"Go to previous page",size:"default",className:(0,i.cn)("gap-1 px-2.5 sm:pl-2.5",e),...t,children:[(0,s.jsx)(n,{}),(0,s.jsx)("span",{className:"hidden sm:block",children:"Previous"})]})}function x({className:e,...t}){return(0,s.jsxs)(u,{"aria-label":"Go to next page",size:"default",className:(0,i.cn)("gap-1 px-2.5 sm:pr-2.5",e),...t,children:[(0,s.jsx)("span",{className:"hidden sm:block",children:"Next"}),(0,s.jsx)(a.A,{})]})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},59666:(e,t,r)=>{"use strict";r.d(t,{A0:()=>i,BF:()=>l,Hj:()=>o,XI:()=>a,nA:()=>d,nd:()=>c,r6:()=>u});var s=r(60687);r(43210);var n=r(77272);function a({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,n.cn)("w-full caption-bottom text-sm",e),...t})})}function i({className:e,...t}){return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,n.cn)("[&_tr]:border-b",e),...t})}function l({className:e,...t}){return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,n.cn)("[&_tr:last-child]:border-0",e),...t})}function o({className:e,...t}){return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,n.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function c({className:e,...t}){return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,n.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function d({className:e,...t}){return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,n.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function u({className:e,...t}){return(0,s.jsx)("caption",{"data-slot":"table-caption",className:(0,n.cn)("text-muted-foreground mt-4 text-sm",e),...t})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66074:(e,t,r)=>{Promise.resolve().then(r.bind(r,69881))},69881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Learning Web\\\\Thesis\\\\Frontend\\\\src\\\\app\\\\vi\\\\(administrator)\\\\dashboard\\\\users\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Learning Web\\Thesis\\Frontend\\src\\app\\vi\\(administrator)\\dashboard\\users\\page.tsx","default")},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},88233:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(62688).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,4825,7076,4866,8601,177],()=>r(14967));module.exports=s})();